{"nom_fichier": "ui.py", "code": "# ui.py\n\nimport random\nimport string\nfrom flask import Flask, render_template, request, jsonify\n\napp = Flask(__name__)\n\n# Dictionnaire des mots à deviner\nmots = {\n    \"facile\": [\"apple\", \"banana\", \"cherry\"],\n    \"moyen\": [\"orange\", \"mango\", \"papaya\"],\n    \"difficile\": [\"avocat\", \"citron\", \"pomme\"]\n}\n\n# Dictionnaire des scores\nscores = {}\n\n# Fonction pour générer un mot aléatoire\ndef generer_mot(niveau):\n    return random.choice(mots[niveau])\n\n# Fonction pour vérifier si une lettre est présente dans le mot\ndef est_present(lettre, mot):\n    for char in mot:\n        if char == lettre:\n            return True\n    return False\n\n# Fonction pour afficher le jeu\ndef afficher_jeu(mot, lettres_tries, erreurs):\n    template = \"\"\"\n    <html>\n    <head>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\">\n    </head>\n    <body>\n    <div class=\"container\">\n    <h1>Jeux du Pendu</h1>\n    <p>Vous avez essayé {tries} fois</p>\n    <p>Le mot à deviner est de {size} lettres</p>\n    <p>Les lettres que vous avez essayées sont : {tries_letters}</p>\n    <p>Lettres restantes : {remaining_letters}</p>\n    <form action=\"\" method=\"post\">\n    <input type=\"text\" name=\"lettre\" placeholder=\"Saisir une lettre\">\n    <button type=\"submit\">Valider</button>\n    </form>\n    </div>\n    </body>\n    </html>\n    \"\"\"\n    return template.format(\n        tries=len(lettres_tries),\n        size=len(mot),\n        tries_letters=\" \".join(lettres_tries),\n        remaining_letters=\"\".join([c for c in string.ascii_lowercase if c not in lettres_tries]),\n        erreurs=erreurs\n    )\n\n# Fonction pour traiter la requête\n@app.route(\"/\", methods=[\"GET\", \"POST\"])\ndef traitement_requete():\n    if request.method == \"POST\":\n        lettre = request.form[\"lettre\"]\n        if len(lettre) != 1 or not lettre.isalpha():\n            return jsonify({\"erreur\": \"Vous devez saisir une seule lettre\"}), 400\n        niveau = request.form[\"niveau\"]\n        mot = generer_mot(niveau)\n        lettres_tries = [c for c in request.form[\"lettres_tries\"].split() if c != \"\"]\n        erreurs = 0\n        for char in lettre:\n            if char in mot:\n                lettres_tries.append(char)\n            else:\n                erreurs += 1\n        if erreurs > 6:\n            return jsonify({\"erreur\": \"Vous avez perdu, le mot était \" + mot}), 400\n        if len(mot) == 0:\n            return jsonify({\"message\": \"Vous avez gagné, félicitations !\"}), 200\n        return jsonify({\"template\": afficher_jeu(mot, lettres_tries, erreurs)})\n    return jsonify({\"template\": afficher_jeu(\"\", [], 0)})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766831427.3453557}