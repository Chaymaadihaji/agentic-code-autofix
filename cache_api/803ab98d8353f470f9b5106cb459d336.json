{"nom_fichier": "README.md", "code": "import streamlit as st\nfrom streamlit_option_menu import option_menu\nimport sqlite3\nimport jwt\nfrom pdfgenerator import PDFGenerator\nfrom flask import Flask, request, jsonify\nfrom flask_jwt_extended import JWTManager, jwt_required, create_access_token\n\napp = Flask(__name__)\napp.config[\"JWT_SECRET_KEY\"] = \"super-secret\"  # Change this!\njwt = JWTManager(app)\n\ndb = sqlite3.connect(\"bibliotheque.db\")\ncursor = db.cursor()\n\n# Fonctions d'authentification\ndef add_user(username, password):\n    cursor.execute(\"INSERT INTO membres (username, password) VALUES (?, ?)\", (username, password))\n    db.commit()\n\ndef authenticate(username, password):\n    cursor.execute(\"SELECT * FROM membres WHERE username = ? AND password = ?\", (username, password))\n    return cursor.fetchone()\n\n# Fonctions de gestion de livres\ndef add_livre(titre, auteur):\n    cursor.execute(\"INSERT INTO livres (titre, auteur) VALUES (?, ?)\", (titre, auteur))\n    db.commit()\n\ndef get_livres():\n    cursor.execute(\"SELECT * FROM livres\")\n    return cursor.fetchall()\n\n# Fonctions de gestion d'emprunts\ndef add_emprunt(livre_id, membre_id):\n    cursor.execute(\"INSERT INTO emprunts (livre_id, membre_id) VALUES (?, ?)\", (livre_id, membre_id))\n    db.commit()\n\ndef get_emprunts():\n    cursor.execute(\"SELECT * FROM emprunts\")\n    return cursor.fetchall()\n\n# Fonctions d'authentification\ndef login():\n    username = st.text_input(\"Nom d'utilisateur\")\n    password = st.text_input(\"Mot de passe\", type=\"password\")\n    if st.button(\"Se connecter\"):\n        user = authenticate(username, password)\n        if user:\n            st.write(\"Bienvenue\", user[1])\n            return user[0]\n        else:\n            st.write(\"Nom d'utilisateur ou mot de passe incorrect\")\n\ndef main():\n    st.title(\"Gestion de Bibliothèque\")\n    menu = option_menu(st.sidebar, [\"Livres\", \"Membres\", \"Emprunts\", \"Déconnexion\"], icons=[\"book\", \"user\", \"briefcase\", \"door\"], menu_icon=\"cast\")\n    if menu == \"Livres\":\n        titre = st.text_input(\"Titre\")\n        auteur = st.text_input(\"Auteur\")\n        if st.button(\"Ajouter livre\"):\n            add_livre(titre, auteur)\n            st.write(\"Livre ajouté avec succès\")\n        livres = get_livres()\n        st.write(livres)\n    elif menu == \"Membres\":\n        username = st.text_input(\"Nom d'utilisateur\")\n        password = st.text_input(\"Mot de passe\", type=\"password\")\n        if st.button(\"Ajouter membre\"):\n            add_user(username, password)\n            st.write(\"Membre ajouté avec succès\")\n        membres = get_membres()\n        st.write(membres)\n    elif menu == \"Emprunts\":\n        livre_id = st.selectbox(\"Livre\", get_livres())\n        membre_id = st.selectbox(\"Membre\", get_membres())\n        if st.button(\"Emprunter livre\"):\n            add_emprunt(livre_id, membre_id)\n            st.write(\"Livre emprunté avec succès\")\n        emprunts = get_emprunts()\n        st.write(emprunts)\n    elif menu == \"Déconnexion\":\n        st.write(\"Au revoir\")\n\nif __name__ == \"__main__\":\n    main()\n", "timestamp": 1766864260.3768618}