{"nom_fichier": ".env.example", "code": "bash\n# requirements.txt\nflask==2.2.2\nflask_sqlalchemy==2.5.1\nsqlite3\n\n# model.py\nfrom flask_sqlalchemy import SQLAlchemy\n\ndb = SQLAlchemy()\n\nclass Task(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    title = db.Column(db.String(50), nullable=False)\n    description = db.Column(db.String(200), nullable=True)\n    done = db.Column(db.Boolean, default=False)\n\n    def __repr__(self):\n        return f'Task({self.title}, {self.done})'\n\n# app.py\nfrom flask import Flask, render_template, request, redirect, url_for\nfrom model import db, Task\nimport os\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret-key'\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///' + os.path.join('database', 'tasks.db')\napp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\ndb.init_app(app)\n\n@app.route('/')\ndef index():\n    try:\n        tasks = Task.query.all()\n        return render_template('index.html', tasks=tasks)\n    except Exception as e:\n        return str(e)\n\n@app.route('/create', methods=['POST'])\ndef create_task():\n    try:\n        title = request.form['title']\n        description = request.form.get('description')\n        task = Task(title=title, description=description)\n        db.session.add(task)\n        db.session.commit()\n        return redirect(url_for('index'))\n    except Exception as e:\n        return str(e)\n\n@app.route('/done/<int:task_id>')\ndef mark_as_done(task_id):\n    try:\n        task = Task.query.get(task_id)\n        if task:\n            task.done = not task.done\n            db.session.commit()\n        return redirect(url_for('index'))\n    except Exception as e:\n        return str(e)\n\n@app.route('/delete/<int:task_id>')\ndef delete_task(task_id):\n    try:\n        task = Task.query.get(task_id)\n        if task:\n            db.session.delete(task)\n            db.session.commit()\n        return redirect(url_for('index'))\n    except Exception as e:\n        return str(e)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n\n# views.py\nfrom app import app\nfrom model import Task\n\n@app.route('/api/tasks', methods=['GET'])\ndef get_tasks_as_json():\n    tasks = Task.query.all()\n    return {'tasks': [task.serialize() for task in tasks]}\n\n# templates/index.html\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>To-Do List</title>\n</head>\n<body>\n    <h1>To-Do List</h1>\n    <a href=\"{{ url_for('create_task') }}\">Ajouter une tâche</a>\n    <ul>\n        {% for task in tasks %}\n            <li>\n                {{ task.title }} - Done: {{ task.done }}\n                <form method=\"post\" action=\"{{ url_for('mark_as_done', task_id=task.id) }}\">\n                    <button type=\"submit\">Marquer comme fait</button>\n                </form>\n                <form method=\"post\" action=\"{{ url_for('delete_task', task_id=task.id) }}\">\n                    <button type=\"submit\">Supprimer</button>\n                </form>\n            </li>\n        {% endfor %}\n    </ul>\n    <a href=\"{{ url_for('get_tasks_as_json') }}\">Afficher les tâches en JSON</a>\n</body>\n</html>\n\n# model.py (suite)\nclass Task(db.Model):\n    # ...\n\n    def serialize(self):\n        return {\n            'id': self.id,\n            'title': self.title,\n            'description': self.description,\n            'done': self.done\n        }\n", "langage": "python", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767109084.4618645, "tentative": 4}