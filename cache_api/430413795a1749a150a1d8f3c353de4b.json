{"nom_fichier": "forms.py", "code": "# forms.py\n\nfrom flask import Flask, render_template, request, jsonify\nimport json\nimport operator\n\napp = Flask(__name__)\n\n# Historique des calculs\nhistorique = []\nMAX_HISTOIRE = 10\n\n# Fonctions de calcul\ncalculs = {\n    '+': operator.add,\n    '-': operator.sub,\n    '*': operator.mul,\n    '/': operator.truediv\n}\n\n# Fonction pour traiter les calculs\ndef traitement_calcul(num1, op, num2):\n    try:\n        return calculs[op](num1, num2)\n    except ZeroDivisionError:\n        return \"Erreur : division par zÃ©ro\"\n\n# Fonction pour effacer l'historique\ndef effacer_historique():\n    global historique\n    historique = []\n\n# Route pour afficher la page de calculatrice\n@app.route('/', methods=['GET'])\ndef calculatrice():\n    return render_template('calculatrice.html')\n\n# Route pour traiter les saisies utilisateur\n@app.route('/', methods=['POST'])\ndef traitement saisie():\n    num1 = float(request.form['num1'])\n    op = request.form['op']\n    num2 = float(request.form['num2'])\n    resultat = traitement_calcul(num1, op, num2)\n    historique.append((num1, op, num2, resultat))\n    if len(historique) > MAX_HISTOIRE:\n        historique.pop(0)\n    return jsonify({'resultat': resultat, 'historique': historique})\n\n# Route pour effacer l'historique\n@app.route('/effacer', methods=['GET'])\ndef effacer():\n    effacer_historique()\n    return jsonify({'historique': historique})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766332735.1620188}