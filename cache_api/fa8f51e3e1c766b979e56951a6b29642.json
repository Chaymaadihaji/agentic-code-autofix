{"nom_fichier": "main.py", "code": "python\nfrom flask import Flask, render_template, request, jsonify\nfrom flask_sqlalchemy import SQLAlchemy\nfrom werkzeug.exceptions import NotFound\n\napp = Flask(__name__)\napp.config[\"SQLALCHEMY_DATABASE_URI\"] = \"sqlite:///taches.db\"\ndb = SQLAlchemy(app)\n\n\n# modèle pour une tâche\nclass Tache(db.Model):\n    __tablename__ = \"taches\"\n    id = db.Column(db.Integer, primary_key=True)\n    nom = db.Column(db.String(100), nullable=False)\n\n\n# création de la base de données\n@app.before_first_request\ndef créer_base_de_données():\n    db.create_all()\n\n\n# route pour accéder à la page d'accueil\n@app.route(\"/\")\ndef index():\n    try:\n        taches = Tache.query.all()\n        return render_template(\"index.html\", taches=taches)\n    except Exception as e:\n        return jsonify({\"erreur\": str(e)}), 500\n\n\n# route pour ajouter une tâche\n@app.route(\"/ajouter\", methods=[\"POST\"])\ndef ajouter_tache():\n    try:\n        nom = request.json[\"nom\"]\n        tache = Tache(nom=nom)\n        db.session.add(tache)\n        db.session.commit()\n        return jsonify({\"message\": \"Tâche ajoutée avec succès\"})\n    except KeyError:\n        return jsonify({\"erreur\": \"Le corps de la requête doit contenir un champ 'nom'\"}), 400\n    except Exception as e:\n        return jsonify({\"erreur\": str(e)}), 500\n\n\n# route pour supprimer une tâche\n@app.route(\"/supprimer/<int:id>\", methods=[\"DELETE\"])\ndef supprimer_tache(id: int):\n    try:\n        tache = Tache.query.get(id)\n        if tache:\n            db.session.delete(tache)\n            db.session.commit()\n            return jsonify({\"message\": \"Tâche supprimée avec succès\"})\n        else:\n            raise NotFound(\"Tâche non trouvée\")\n    except NotFound as e:\n        return jsonify({\"erreur\": str(e)}), 404\n    except Exception as e:\n        return jsonify({\"erreur\": str(e)}), 500\n\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "langage": "python", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767109022.8265562, "tentative": 4}