{"nom_fichier": "models.py", "code": "python\n# models.py\n\nfrom typing import List\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import accuracy_score\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nclass DataScienceModel:\n    def __init__(self, data: pd.DataFrame):\n        \"\"\"\n        Initialisation du modèle.\n\n        Args:\n            data (pd.DataFrame): Données d'entrée.\n\n        Raises:\n            ValueError: Si les données sont vides.\n        \"\"\"\n        if not data.empty:\n            self.data = data\n        else:\n            raise ValueError(\"Données vides\")\n\n    def preprocess_data(self) -> pd.DataFrame:\n        \"\"\"\n        Prétraitement des données.\n\n        Returns:\n            pd.DataFrame: Données prétraitées.\n        \"\"\"\n        try:\n            # Créer des variables numériques\n            self.data['var_num_1'] = np.random.rand(len(self.data))\n            self.data['var_num_2'] = np.random.rand(len(self.data))\n\n            # Transformer les chaînes en numériques\n            self.data['var_str'] = self.data['var_str'].astype('category')\n            self.data['var_str'] = self.data['var_str'].cat.codes\n\n            return self.data\n        except Exception as e:\n            print(f\"Erreur : {e}\")\n            return pd.DataFrame()\n\n    def train_model(self) -> LogisticRegression:\n        \"\"\"\n        Formation du modèle.\n\n        Returns:\n            LogisticRegression: Modèle formé.\n        \"\"\"\n        try:\n            # Séparation des données en entraînement et test\n            X_train, X_test, y_train, y_test = train_test_split(self.data[['var_num_1', 'var_num_2']], self.data['var_target'], test_size=0.2, random_state=42)\n\n            # Créer un modèle de régression logistique\n            model = LogisticRegression(max_iter=1000)\n\n            # Entraîner le modèle\n            model.fit(X_train, y_train)\n\n            return model\n        except Exception as e:\n            print(f\"Erreur : {e}\")\n            return None\n\n    def evaluate_model(self, model: LogisticRegression) -> None:\n        \"\"\"\n        Évaluation du modèle.\n\n        Args:\n            model (LogisticRegression): Modèle à évaluer.\n        \"\"\"\n        try:\n            # Prédre les valeurs pour les données de test\n            y_pred = model.predict(X_test)\n\n            # Évaluer la précision du modèle\n            accuracy = accuracy_score(y_test, y_pred)\n            print(f\"Précision : {accuracy:.2f}\")\n        except Exception as e:\n            print(f\"Erreur : {e}\")\n\n# Exemple d'utilisation\nif __name__ == \"__main__\":\n    # Simuler des données\n    df = pd.DataFrame({\n        'var_str': ['A', 'B', 'A', 'C', 'B'],\n        'var_target': [1, 0, 1, 1, 0]\n    })\n\n    # Créer un modèle\n    model = DataScienceModel(df)\n\n    # Prétraiter les données\n    df_preprocessed = model.preprocess_data()\n\n    # Former le modèle\n    logistic_regression = model.train_model()\n\n    # Évaluer le modèle\n    model.evaluate_model(logistic_regression)\n", "langage": "python", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767105478.8617852, "tentative": 4}