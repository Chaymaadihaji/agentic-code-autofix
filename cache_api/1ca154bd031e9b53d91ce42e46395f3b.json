{"nom_fichier": "main.py", "code": "# main.py\n\nimport json\nimport random\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# État du jeu\nscores = {\n    'joueur': 0,\n    'ordinateur': 0\n}\n\n# Historique des parties\nhistorique = []\n\n# Fonction pour générer les cartes\ndef generer_cartes():\n    return ['pierre', 'papier', 'ciseaux']\n\n# Fonction pour gérer les scores\ndef gérer_scores(gagnant):\n    global scores\n    if gagnant == 'joueur':\n        scores['joueur'] += 1\n    elif gagnant == 'ordinateur':\n        scores['ordinateur'] += 1\n\n# Fonction pour déterminer le gagnant\ndef déterminer_gagnant(joueur, ordinateur):\n    if joueur == ordinateur:\n        return 'égalité'\n    if (joueur == 'pierre' and ordinateur == 'ciseaux') or (joueur == 'papier' and ordinateur == 'pierre') or (joueur == 'ciseaux' and ordinateur == 'papier'):\n        return 'joueur'\n    return 'ordinateur'\n\n# Fonction pour jouer au jeu\ndef jouer_jeu():\n    global historique\n    cartes = generer_cartes()\n    joueur = request.form['carte']\n    ordinateur = random.choice(cartes)\n    gagnant = déterminer_gagnant(joueur, ordinateur)\n    gérer_scores(gagnant)\n    historique.append({\n        'joueur': joueur,\n        'ordinateur': ordinateur,\n        'gagnant': gagnant\n    })\n    return gagnant\n\n# Route pour afficher l'interface\n@app.route('/', methods=['GET'])\ndef index():\n    return render_template('index.html', scores=scores, historique=historique)\n\n# Route pour jouer au jeu\n@app.route('/jouer', methods=['POST'])\ndef jouer():\n    return jouer_jeu()\n\n# Lancement de l'app\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766748928.962116}