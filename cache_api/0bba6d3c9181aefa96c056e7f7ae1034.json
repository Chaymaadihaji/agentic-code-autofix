{"nom_fichier": "data_processor.py", "code": "# data_processor.py\n\nimport json\nimport os\nfrom flask import Flask, request, jsonify\nimport matplotlib.pyplot as plt\nimport pandas as pd\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn import metrics\n\napp = Flask(__name__)\n\n# Génération de données pour le dashboard\ndata = {\n    \"tâches\": [\n        {\"nom\": \"Tâche 1\", \"statut\": \"En cours\", \"début\": \"2022-01-01\", \"fin\": \"2022-01-15\"},\n        {\"nom\": \"Tâche 2\", \"statut\": \"Terminée\", \"début\": \"2022-02-01\", \"fin\": \"2022-02-28\"},\n        {\"nom\": \"Tâche 3\", \"statut\": \"En cours\", \"début\": \"2022-03-01\", \"fin\": \"2022-03-31\"},\n        {\"nom\": \"Tâche 4\", \"statut\": \"Terminée\", \"début\": \"2022-04-01\", \"fin\": \"2022-04-30\"},\n        {\"nom\": \"Tâche 5\", \"statut\": \"En cours\", \"début\": \"2022-05-01\", \"fin\": \"2022-05-31\"}\n    ]\n}\n\n# Chargement des données depuis un fichier JSON\ndef charger_donnees():\n    if os.path.exists(\"donnees.json\"):\n        with open(\"donnees.json\", \"r\") as f:\n            return json.load(f)\n    else:\n        return data\n\n# Enregistrement des données dans un fichier JSON\ndef enregistrer_donnees(donnees):\n    with open(\"donnees.json\", \"w\") as f:\n        json.dump(donnees, f)\n\n# Création de la base de données\n@app.route(\"/donnees\", methods=[\"GET\"])\ndef get_donnees():\n    donnees = charger_donnees()\n    return jsonify(donnees)\n\n# Ajout d'une nouvelle tâche\n@app.route(\"/donnees\", methods=[\"POST\"])\ndef ajouter_tache():\n    donnees = charger_donnees()\n    new_tache = {\n        \"nom\": request.json[\"nom\"],\n        \"statut\": \"En cours\",\n        \"début\": request.json[\"début\"],\n        \"fin\": request.json[\"fin\"]\n    }\n    donnees[\"tâches\"].append(new_tache)\n    enregistrer_donnees(donnees)\n    return jsonify(new_tache)\n\n# Mise à jour d'une tâche existante\n@app.route(\"/donnees/<int:id>\", methods=[\"PUT\"])\ndef mettre_a_jour_tache(id):\n    donnees = charger_donnees()\n    for tache in donnees[\"tâches\"]:\n        if tache[\"id\"] == id:\n            tache[\"nom\"] = request.json[\"nom\"]\n            tache[\"statut\"] = request.json[\"statut\"]\n            tache[\"début\"] = request.json[\"début\"]\n            tache[\"fin\"] = request.json[\"fin\"]\n            enregistrer_donnees(donnees)\n            return jsonify(tache)\n    return jsonify({\"erreur\": \"Tâche non trouvée\"})\n\n# Suppression d'une tâche\n@app.route(\"/donnees/<int:id>\", methods=[\"DELETE\"])\ndef supprimer_tache(id):\n    donnees = charger_donnees()\n    for i, tache in enumerate(donnees[\"tâches\"]):\n        if tache[\"id\"] == id:\n            del donnees[\"tâches\"][i]\n            enregistrer_donnees(donnees)\n            return jsonify({\"message\": \"Tâche supprimée\"})\n    return jsonify({\"erreur\": \"Tâche non trouvée\"})\n\n# Calcul des statistiques de progression\n@app.route(\"/statistiques\", methods=[\"GET\"])\ndef get_statistiques():\n    donnees = charger_donnees()\n    taches_en_cours = [tache for tache in donnees[\"tâches\"] if tache[\"statut\"] == \"En cours\"]\n    taches_terminees = [tache for tache in donnees[\"tâches\"] if tache[\"statut\"] == \"Terminée\"]\n    return jsonify({\n        \"taches_en_cours\": len(taches_en_cours),\n        \"taches_terminees\": len(taches_terminees)\n    })\n\n# Lancement de l'app\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766329968.2634497}