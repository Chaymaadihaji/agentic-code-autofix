{"nom_fichier": "dashboard.py", "code": "# dashboard.py\n\nimport json\nfrom flask import Flask, render_template, request\nfrom datetime import datetime\nimport statistics\nimport random\n\napp = Flask(__name__)\n\n# Fiches patients détaillées\npatients = [\n    {\"id\": 1, \"nom\": \"Patient 1\", \"prenom\": \"Jean\", \"date_naissance\": \"1990-01-01\"},\n    {\"id\": 2, \"nom\": \"Patient 2\", \"prenom\": \"Pierre\", \"date_naissance\": \"1995-06-01\"},\n    {\"id\": 3, \"nom\": \"Patient 3\", \"prenom\": \"Marc\", \"date_naissance\": \"1980-03-01\"}\n]\n\n# Historique médical\nhistorique = [\n    {\"id\": 1, \"patient_id\": 1, \"date\": \"2022-01-01\", \"description\": \"Consultation\"},\n    {\"id\": 2, \"patient_id\": 1, \"date\": \"2022-01-15\", \"description\": \"Analyse de sang\"},\n    {\"id\": 3, \"patient_id\": 2, \"date\": \"2022-02-01\", \"description\": \"Consultation\"}\n]\n\n# Ordonnances numériques\nordonnances = [\n    {\"id\": 1, \"patient_id\": 1, \"medicament\": \"Ibuprofène\", \"dosage\": 2},\n    {\"id\": 2, \"patient_id\": 1, \"medicament\": \"Acetaminophène\", \"dosage\": 3},\n    {\"id\": 3, \"patient_id\": 2, \"medicament\": \"Paracetamol\", \"dosage\": 1}\n]\n\n# Prise de rendez-vous\nrendez_vous = [\n    {\"id\": 1, \"patient_id\": 1, \"date\": \"2022-03-01\", \"heure\": \"10:00\"},\n    {\"id\": 2, \"patient_id\": 2, \"date\": \"2022-03-15\", \"heure\": \"14:00\"},\n    {\"id\": 3, \"patient_id\": 3, \"date\": \"2022-04-01\", \"heure\": \"18:00\"}\n]\n\n# Alertes médicaments\nalertes = [\n    {\"id\": 1, \"patient_id\": 1, \"medicament\": \"Ibuprofène\", \"dernier_usage\": \"2022-01-01\"},\n    {\"id\": 2, \"patient_id\": 1, \"medicament\": \"Acetaminophène\", \"dernier_usage\": \"2022-01-15\"},\n    {\"id\": 3, \"patient_id\": 2, \"medicament\": \"Paracetamol\", \"dernier_usage\": \"2022-02-01\"}\n]\n\n# Dossier médical partagé\ndossier = {\n    \"id\": 1,\n    \"patient_id\": 1,\n    \"fiches\": patients,\n    \"historique\": historique,\n    \"ordonnances\": ordonnances,\n    \"rendez_vous\": rendez_vous,\n    \"alertes\": alertes\n}\n\n# Graphiques de suivi santé\ngraphiques = {\n    \"id\": 1,\n    \"patient_id\": 1,\n    \"graphique1\": {\n        \"label\": \"Poids\",\n        \"data\": [70, 72, 75, 78, 80]\n    },\n    \"graphique2\": {\n        \"label\": \"Féquence cardiaque\",\n        \"data\": [60, 62, 65, 68, 70]\n    }\n}\n\n# Rapports pour médecins\nrapports = {\n    \"id\": 1,\n    \"patient_id\": 1,\n    \"rapport1\": {\n        \"label\": \"Consultation\",\n        \"description\": \"Consultation régulière pour suivre l'état du patient\"\n    },\n    \"rapport2\": {\n        \"label\": \"Analyse de sang\",\n        \"description\": \"Analyse de sang pour suivre les paramètres du patient\"\n    }\n}\n\n# API en temps réel\n@app.route(\"/api/data\", methods=[\"GET\"])\ndef get_data():\n    return json.dumps(dossier)\n\n# Calcul des statistiques/métriques\n@app.route(\"/api/statistiques\", methods=[\"GET\"])\ndef get_statistiques():\n    poids = statistics.mean([fiche[\"poids\"] for fiche in patients])\n    féquence_cardiaque = statistics.mean([fiche[\"féquence_cardiaque\"] for fiche in patients])\n    return f\"Poids moyen : {poids}, Féquence cardiaque moyenne : {féquence_cardiaque}\"\n\n# Structure modulaire pour différentes visualisations\n@app.route(\"/graphiques\", methods=[\"GET\"])\ndef get_graphiques():\n    return render_template(\"graphiques.html\", graphiques=graphiques)\n\n# Interface web\n@app.route(\"/\", methods=[\"GET\"])\ndef index():\n    return render_template(\"index.html\", patients=patients, historique=historique, ordonnances=ordonnances, rendez_vous=rendez_vous, alertes=alertes)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766766441.7422578}