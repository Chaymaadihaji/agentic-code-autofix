{"nom_fichier": "main.py", "code": "import random\nimport json\n\n# Fichier de mots à deviner\nmots = json.load(open('mots.json'))\n\n# État du jeu\netat = {\n    'mot': random.choice(mots),\n    'lettres_proposees': [],\n    'lettres_justes': [],\n    'lettres_incorrectes': [],\n    'essais': 6,\n    'score': 0\n}\n\n# Template HTML\ntemplate = '''\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Jeu du pendu</title>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\">\n</head>\n<body>\n    <h1>Jeu du pendu</h1>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-md-6\">\n                <h2>Mot à deviner: {{ mot }}</h2>\n                <h3>Lettres proposées: {{ ', '.join(lettres_proposees) }}</h3>\n                <h3>Lettres justes: {{ ', '.join(lettres_justes) }}</h3>\n                <h3>Lettres incorrectes: {{ ', '.join(lettres_incorrectes) }}</h3>\n                <h3>Essais restants: {{ essais }}</h3>\n            </div>\n            <div class=\"col-md-6\">\n                <form action=\"\" method=\"post\">\n                    <input type=\"text\" name=\"lettre\" placeholder=\"Saisir une lettre\">\n                    <button type=\"submit\">Proposer</button>\n                </form>\n                <button type=\"button\" class=\"btn btn-danger\" onclick=\"document.location.href='?'\">Réinitialiser</button>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n'''\n\n# Application Flask\nfrom flask import Flask, request, render_template_string\n\napp = Flask(__name__)\n\n@app.route('/', methods=['GET', 'POST'])\ndef jeu():\n    global etat\n    if request.method == 'POST':\n        lettre = request.form['lettre']\n        if lettre in etat['mot']:\n            if lettre not in etat['lettres_justes']:\n                etat['lettres_justes'].append(lettre)\n                if ''.join(etat['lettres_justes']) == etat['mot']:\n                    etat['score'] += 100\n                    return render_template_string(template, **etat) + '<h1>Félicitations, vous avez gagné !</h1>'\n        else:\n            if lettre not in etat['lettres_incorrectes']:\n                etat['lettres_incorrectes'].append(lettre)\n                etat['essais'] -= 1\n                if etat['essais'] == 0:\n                    return render_template_string(template, **etat) + '<h1>Vous avez perdu ! Le mot à deviner était \"' + etat['mot'] + '\".</h1>'\n    return render_template_string(template, **etat)\n\n@app.route('/reinitialiser')\ndef reinitialiser():\n    global etat\n    etat = {\n        'mot': random.choice(mots),\n        'lettres_proposees': [],\n        'lettres_justes': [],\n        'lettres_incorrectes': [],\n        'essais': 6,\n        'score': 0\n    }\n    return render_template_string(template, **etat)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766831500.0592744}