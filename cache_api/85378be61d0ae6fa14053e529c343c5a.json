{"nom_fichier": "ui.py", "code": "import random\nimport json\nfrom flask import Flask, render_template, request, jsonify\n\napp = Flask(__name__)\n\n# Chargement des mots à deviner\nwith open('mots.json') as f:\n    mots = json.load(f)\n\n# Etat du jeu\netat_jeu = {\n    'mots': mots,\n    'mot_a_deviner': '',\n    'lettres_utilisees': [],\n    'score': 0,\n    'niveau': 1\n}\n\n@app.route('/')\ndef index():\n    return render_template('index.html', etat_jeu=etat_jeu)\n\n@app.route('/devine', methods=['POST'])\ndef devine():\n    lettre = request.form['lettre']\n    # Génération du mot à deviner\n    etat_jeu['mot_a_deviner'] = random.choice(etat_jeu['mots']['niveau' + str(etat_jeu['niveau'])])\n    # Vérification de la lettre\n    if lettre in etat_jeu['mot_a_deviner']:\n        etat_jeu['score'] += 10\n    else:\n        etat_jeu['lettres_utilisees'].append(lettre)\n        etat_jeu['score'] -= 10\n    # Affichage du pendu\n    etat_jeu['pendu'] = affiche_pendu(etat_jeu['lettres_utilisees'])\n    return jsonify(etat_jeu)\n\n@app.route('/niveau', methods=['POST'])\ndef niveau():\n    etat_jeu['niveau'] += 1\n    return jsonify(etat_jeu)\n\ndef affiche_pendu(lettres_utilisees):\n    pendu = ''\n    for i in range(len(etat_jeu['mot_a_deviner'])):\n        if etat_jeu['mot_a_deviner'][i] in lettres_utilisees:\n            pendu += '_'\n        else:\n            pendu += etat_jeu['mot_a_deviner'][i]\n    return pendu\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766863543.6629345}