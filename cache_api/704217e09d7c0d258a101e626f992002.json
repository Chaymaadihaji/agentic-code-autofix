{"nom_fichier": "ui.py", "code": "# ui.py\n\nfrom flask import Flask, render_template, request\nimport random\nimport json\n\napp = Flask(__name__)\n\n# Chemin vers le fichier de mots\nmots_fichier = 'mots.json'\n\n# Charge les mots au hasard\ndef charger_mots():\n    with open(mots_fichier, 'r') as f:\n        mots = json.load(f)['mots']\n    return random.choice(mots)\n\n# Génération du mot secret\nmot_secret = charger_mots()\ntentatives = 4\netat_jeu = {'tentatives': tentatives, 'lettres_utilisees': []}\n\n# Fonction de vérification de la lettre\ndef verifier_lettre(lettres_utilisees, lettre):\n    global tentatives\n    global mot_secret\n    global etat_jeu\n    \n    if lettre in mot_secret:\n        etat_jeu['lettres_utilisees'].append(lettre)\n    else:\n        tentatives -= 1\n        etat_jeu['tentatives'] = tentatives\n        etat_jeu['lettres_utilisees'].append(lettre)\n\n# Fonction de fin de jeu\ndef fin_jeu(gagne):\n    global etat_jeu\n    etat_jeu['gagne'] = gagne\n\n# Route pour afficher le formulaire\n@app.route('/', methods=['GET'])\ndef formulaire():\n    return render_template('formulaire.html', etat_jeu=etat_jeu)\n\n# Route pour traiter le formulaire\n@app.route('/', methods=['POST'])\ndef traiter_formulaire():\n    global mot_secret\n    global tentatives\n    global etat_jeu\n    \n    lettre = request.form['lettre']\n    verifier_lettre(etat_jeu['lettres_utilisees'], lettre)\n    \n    if lettre in mot_secret:\n        if all([l in etat_jeu['lettres_utilisees'] for l in mot_secret]):\n            fin_jeu(True)\n    elif tentatives == 0:\n        fin_jeu(False)\n    \n    return render_template('formulaire.html', etat_jeu=etat_jeu)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766861951.3020568}