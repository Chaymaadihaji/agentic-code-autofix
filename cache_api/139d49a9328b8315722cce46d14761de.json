{"nom_fichier": "main.java", "code": "```java\n// dossier projet : projet-api\n// fichier pom.xml (dépendances)\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.exemple</groupId>\n    <artifactId>projet-api</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n    <packaging>jar</packaging>\n\n    <name>projet-api</name>\n    <description>API de démonstration</description>\n\n    <parent>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-parent</artifactId>\n        <version>2.5.6</version>\n        <relativePath/> <!-- lookup parent from repository -->\n    </parent>\n\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <java.version>11</java.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-security</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-data-jpa</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.postgresql</groupId>\n            <artifactId>postgresql</artifactId>\n            <scope>runtime</scope>\n        </dependency>\n        <dependency>\n            <groupId>io.springfox</groupId>\n            <artifactId>springfox-boot-starter</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>io.springfox</groupId>\n            <artifactId>springfox-swagger-ui</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <optional>true</optional>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-maven-plugin</artifactId>\n            </plugin>\n        </plugins>\n    </build>\n\n</project>\n\n// dossier src/test/java\n// package com.example.projetapi.model.test\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport org.junit.jupiter.api.extension.ExtendWith;\n\nimport static org.junit.jupiter.api.Assertions.assertTrue;\n\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class ExampleTest {\n\n    @Test\n    public void testExample() {\n        // Test\n        assertTrue(true);\n    }\n}\n\n// dossier src/main/java\n// package com.example.projetapi.domain;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Example {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    // ...\n}\n\n// dossier src/main/java\n// package com.example.projetapi.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.env.Environment;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private Environment env;\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService)\n            .passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n            .authorizeRequests()\n            .antMatchers(\"/login\").permitAll()\n            .antMatchers(\"/swagger*\").permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .oauth2Login();\n    }\n}\n\n// dossier src/main/java\n// package com.example.projetapi.controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.annotation.Secured;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\n\n@Api(tags = \"API REST\")\n@RestController\n@RequestMapping(\"/api\")\npublic class ExampleController {\n\t@Autowired\n\tprivate ExampleService exampleService;\n    \n    @Secured(\"ROLE_USER\")\n    @ApiOperation(\"Example 1\")\n    @PostMapping(\"/example1\")\n    public ResponseEntity<String> example1(@RequestBody Example example){\n        // Traitement\n        return ResponseEntity.ok(\"Resultat\");\n    }\n}\n\n// dossier src/main/java\n// package com.example.projetapi.model.entity\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Utilisateur {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    // ...\n}\n\n// dossier src/main/java\n// package com.example.projetapi.model.dtos;\n\nimport com.fasterxml.jackson.annotation.JsonAlias;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\npublic class Token {\n    @JsonProperty\n    private String token;\n    @JsonProperty\n    private Utilisateur utilisateur;\n    // ...\n}\n\n// dossier src/main/java\n// package com.example.projetapi.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.servlet.support.ServletUriComponentsBuilder;\n\nimport io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker;\nimport io.github.resilience4j.retry.annotation.Retryable;\nimport io.github.resilience4j.timelimiter.annotation.TimeLimiter;\n\n@Service\n//@EnableCircuitBreaker\npublic class ExampleService {\n    @Autowired\n    private UtilisateurService utilisateurService;\n    \n    @CircuitBreaker(name = \"monCircuitBreaker\", fallback = \"fallbackExempleService\")\n    public Response exemple() {\n        Response resultat = new Response();\n        // Traitement\n        return resultat;\n    }\n    \n    @Retryable(name = \"monRetryable\", fallback = \"fallbackExempleService\")\n    public Response exempleRetry() {\n        Response resultat = new Response();\n        // Traitement\n        return resultat;\n    }\n    \n    @TimeLimiter(name = \"monTimeLimiter\")\n    public void exempleDelay() {\n        // Traitement\n    }\n}\n\n// dossier src/main/java\n// package com.example.projetapi.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Service;\n\nimport io.github.resilience4j.circuitbreaker.annotation.CircuitBreaker;\nimport io.github.resilience4j.retry.annotation.Retryable;\nimport io.github.resilience4j.timelimiter.annotation.TimeLimiter;\n\n@Service\n//@EnableCircuitBreaker\npublic class UtilisateurService {\n    @CircuitBreaker(name = \"monCircuitBreaker\", fallback = \"fallbackUtilisateurService\")\n    public Response exemple() {\n        Response resultat = new Response();\n        // Traitement\n        return resultat;\n    }\n    \n    @Retryable(name = \"monRetryable\", fallback = \"fallbackUtilisateurService\")\n    public Response exempleRetry() {\n        Response resultat = new Response();\n        // Traitement\n        return resultat;\n    }\n    \n    @TimeLimiter(name = \"monTimeLimiter\")\n    public void exempleDelay() {\n        // Traitement\n    }\n}\n\n// dossier src/main/java\n// package com.example.projetapi.exception\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\npublic class RechercheNonTrouveeException extends RuntimeException {\n    private static final long serialVersionUID = 1L;\n}\n\n// dossier src/main/java\n// package com.example.projetapi.controller\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.annotation.Secured;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping\n", "langage": "java", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767105718.7839494, "tentative": 4}