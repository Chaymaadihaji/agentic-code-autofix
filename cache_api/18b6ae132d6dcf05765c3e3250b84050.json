{"nom_fichier": "game.py", "code": "from flask import Flask, render_template, request\nfrom random import choice\nimport json\n\napp = Flask(__name__)\n\n# Chargement des mots à deviner\nwith open('mots.json') as f:\n    mots = json.load(f)\n\n# État du jeu\nlettres_saisies = []\nlettre_choisie = None\nscore = 0\nniveau = 1\n\n# Fonction de génération du mot à deviner\ndef generer_mot():\n    global mots, niveau\n    mots = mots[niveau - 1]\n    return ''.join(['_' for _ in mots])\n\n# Fonction de vérification de la lettre\ndef verifier_lettre(lettre):\n    global lettre_choisie, lettres_saisies\n    if lettre in lettres_saisies:\n        return False\n    lettres_saisies.append(lettre)\n    lettre_choisie = lettre\n    return True\n\n# Fonction de défaite\ndef defaite():\n    return f\"Vous avez perdu ! Le mot était {mots}.\"\n\n# Fonction de victoire\ndef victoire():\n    global score, niveau\n    score += 1\n    if score % 3 == 0:\n        niveau += 1\n    return f\" Félicitations ! Vous avez gagné ! Votre score est {score} et votre niveau est {niveau}.\"\n\n# Route pour l'affichage du jeu\n@app.route('/')\ndef jeu():\n    global mots, lettres_saisies, lettre_choisie, score, niveau\n    mots = generer_mot()\n    lettres_saisies = []\n    lettre_choisie = None\n    score = 0\n    niveau = 1\n    return render_template('jeu.html', mots=mots, lettres_saisies=lettres_saisies)\n\n# Route pour la saisie de la lettre\n@app.route('/saisie', methods=['POST'])\ndef saisie():\n    global lettres_saisies, lettre_choisie\n    lettre = request.form['lettre']\n    if verifier_lettre(lettre):\n        if lettre in mots:\n            for i, mot in enumerate(mots):\n                if mot == lettre:\n                    mots = mots[:i] + ['*' if m != lettre else m for m in mots[i:]]\n        else:\n            return defaite()\n    else:\n        return \"Vous avez déjà saisi cette lettre !\"\n    if '*' not in mots:\n        return victoire()\n    return render_template('jeu.html', mots=mots, lettres_saisies=lettres_saisies)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766831525.2471766}