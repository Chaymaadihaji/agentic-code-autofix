{"nom_fichier": "main.py", "code": "from flask import Flask, render_template, request, jsonify\nfrom flask_bootstrap import Bootstrap\n\napp = Flask(__name__)\nBootstrap(app)\n\ncalculs = []\nhistorique = []\n\n@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\", calculs=calculs, historique=historique)\n\n@app.route(\"/calcul\", methods=[\"POST\"])\ndef calcul():\n    try:\n        num1 = float(request.form[\"num1\"])\n        num2 = float(request.form[\"num2\"])\n        op = request.form[\"op\"]\n        if op == \"+\":\n            result = num1 + num2\n        elif op == \"-\":\n            result = num1 - num2\n        elif op == \"*\":\n            result = num1 * num2\n        elif op == \"/\":\n            if num2 != 0:\n                result = num1 / num2\n            else:\n                raise ValueError\n        calculs.append(f\"{num1} {op} {num2} = {result}\")\n        historique.append({\"calcul\": f\"{num1} {op} {num2} = {result}\", \"result\": result})\n        return jsonify({\"result\": result})\n    except ValueError:\n        return jsonify({\"error\": \"Erreur de calcul\"}), 400\n\n@app.route(\"/historique\")\ndef historique_route():\n    return render_template(\"historique.html\", historique=historique)\n\n@app.route(\"/effacer_historique\")\ndef effacer_historique():\n    global historique\n    historique = []\n    return jsonify({\"message\": \"Historique effac√©\"})\n\n@app.route(\"/calculs\")\ndef calculs_route():\n    return jsonify(calculs)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766332712.9047363}