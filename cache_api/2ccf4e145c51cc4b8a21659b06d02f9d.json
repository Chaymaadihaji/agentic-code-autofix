{"nom_fichier": "main.py", "code": "# main.py\n\nfrom flask import Flask, render_template, request\nimport json\nimport random\n\napp = Flask(__name__)\n\n# Chargement des citations depuis un fichier JSON\nwith open('citations.json') as f:\n    citations = json.load(f)\n\n# Route principale\n@app.route('/')\ndef index():\n    # Génération d'une citation aléatoire\n    citation = random.choice(citations['citations'])\n    return render_template('index.html', citation=citation)\n\n# Route pour rafraîchir la citation\n@app.route('/rafraîchir')\ndef rafraîchir():\n    return render_template('index.html')\n\n# Route pour afficher les citations\n@app.route('/citations')\ndef citations_list():\n    return render_template('citations.html', citations=citations['citations'])\n\n# Route pour générer une citation aléatoire en JSON\n@app.route('/citation/<int:id>')\ndef citation_json(id):\n    if id < len(citations['citations']):\n        return json.dumps({'citation': citations['citations'][id]})\n    else:\n        return 'Citation non trouvée', 404\n\n# Gestion des erreurs\n@app.errorhandler(404)\ndef page_not_found(e):\n    return 'Page non trouvée', 404\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766332532.8753939}