{"nom_fichier": "main.py", "code": "import random\nfrom flask import Flask, render_template, request, jsonify\nimport json\n\napp = Flask(__name__)\n\n# Données pour le jeu\nmots = [\"apple\", \"banana\", \"cherry\", \"date\", \"elderberry\"]\ntentatives = 6\n\n# Fichier de données\nwith open(\"donnees.json\", \"w\") as f:\n    json.dump({\"mots\": mots}, f)\n\n@app.route(\"/\")\ndef jeu():\n    return render_template(\"jeu.html\")\n\n@app.route(\"/nouv_mot\", methods=[\"POST\"])\ndef nouveau_mot():\n    global mots\n    mots = [mot for mot in mots if mot not in mots[:random.randint(1, len(mots))]]\n    return jsonify({\"mot\": random.choice(mots)})\n\n@app.route(\"/tentative\", methods=[\"POST\"])\ndef tentative():\n    global tentatives\n    mot = request.json[\"mot\"]\n    mot_chiffre = [\"_\"] * len(mot)\n    for lettre in mot:\n        if lettre in mots[0]:\n            for i, l in enumerate(mot):\n                if l == lettre:\n                    mot_chiffre[i] = lettre\n    tentatives -= 1\n    return jsonify({\"mot_chiffre\": mot_chiffre, \"tentatives\": tentatives})\n\n@app.route(\"/fin_jeu\", methods=[\"POST\"])\ndef fin_jeu():\n    global tentatives\n    mot = request.json[\"mot\"]\n    mot_chiffre = [\"_\"] * len(mot)\n    for lettre in mot:\n        if lettre in mots[0]:\n            for i, l in enumerate(mot):\n                if l == lettre:\n                    mot_chiffre[i] = lettre\n    tentatives -= 1\n    if \"_\" not in mot_chiffre:\n        return jsonify({\"resultat\": \"gagné\"})\n    elif tentatives == 0:\n        return jsonify({\"resultat\": \"perdu\"})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766861748.442583}