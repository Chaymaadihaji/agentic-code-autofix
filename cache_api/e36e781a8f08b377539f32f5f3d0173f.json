{"nom_fichier": "main.py", "code": "import random\nfrom flask import Flask, render_template, request, jsonify\nimport json\n\napp = Flask(__name__)\n\n# Fichier contenant les mots\nmots = \"mots.json\"\n\n# Fonction pour charger les mots du fichier\ndef charger_mots():\n    with open(mots, \"r\") as fichier:\n        return json.load(fichier)\n\n# Fonction pour générer un mot au hasard\ndef generer_mot():\n    return random.choice(charger_mots())\n\n# Fonction pour afficher le mot avec les lettres masquées\ndef afficher_mot(mot, lettres_utilisees):\n    return \"\".join([lettre if lettre in lettres_utilisees else \"_\" for lettre in mot])\n\n# Fonction pour compter le nombre d'essais\ndef compter_essais(lettres_utilisees, mot):\n    return len([lettre for lettre in mot if lettre not in lettres_utilisees])\n\n# Fonction pour vérifier si le mot est trouvé\ndef mot_trouve(lettres_utilisees, mot):\n    return all([lettre in lettres_utilisees for lettre in mot])\n\n# Fonction pour jouer au jeu\ndef jouer():\n    mot = generer_mot()\n    lettres_utilisees = set()\n    essais = 0\n    while essais < 6 and not mot_trouve(lettres_utilisees, mot):\n        lettres = request.form.get(\"lettres\")\n        if not lettres:\n            return jsonify({\"erreur\": \"Vous devez saisir au moins une lettre\"}), 400\n        for lettre in lettres:\n            if lettre in lettres_utilisees:\n                return jsonify({\"erreur\": \"Vous avez déjà utilisé cette lettre\"}), 400\n            lettres_utilisees.add(lettre)\n            if lettre not in mot:\n                essais += 1\n        resultats = {\n            \"mot\": afficher_mot(mot, lettres_utilisees),\n            \"essais\": essais,\n            \"lettres_utilisees\": sorted(list(lettres_utilisees))\n        }\n        return jsonify(resultats), 200\n    if mot_trouve(lettres_utilisees, mot):\n        return jsonify({\"message\": \"Félicitations, vous avez trouvé le mot!\"}), 200\n    return jsonify({\"message\": \"Désolé, vous avez perdu!\"}), 200\n\n# Route pour jouer au jeu\n@app.route(\"/jouer\", methods=[\"POST\"])\ndef jouer_route():\n    return jouer()\n\n# Route pour afficher la page d'accueil\n@app.route(\"/\")\ndef accueil():\n    return render_template(\"accueil.html\")\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766863583.9020357}