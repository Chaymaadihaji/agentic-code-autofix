{"nom_fichier": "main.py", "code": "# main.py\nfrom flask import Flask, render_template, request, jsonify\nfrom flask_jwt_extended import JWTManager, jwt_required, create_access_token\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_bcrypt import Bcrypt\nfrom flask_redis import FlaskRedis\nimport stripe\nfrom celery import Celery\nimport json\nimport os\nfrom datetime import datetime\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret_key'\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///database.db'\napp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\napp.config['JWT_SECRET_KEY'] = 'jwt_secret_key'\napp.config['JWT_ACCESS_TOKEN_EXPIRES'] = datetime.utcnow() + timedelta(days=1)\napp.config['REDIS_URL'] = 'redis://localhost:6379/0'\nstripe.api_key = os.environ.get('STRIPE_API_KEY')\n\ndb = SQLAlchemy(app)\nbcrypt = Bcrypt(app)\nredis_store = FlaskRedis(app)\njwt = JWTManager(app)\n\ncelery = Celery(app.name, broker='amqp://localhost')\ncelery.conf.beat_schedule = {\n    'send-notification': {\n        'task': 'send_notification',\n        'schedule': 60.0,  # run every minute\n    },\n}\n\nfrom models import Produit, Utilisateur, Commande, Paiement, Notification\nfrom routes import *\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766864856.679408}