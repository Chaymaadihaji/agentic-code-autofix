{"nom_fichier": "app.py", "code": "python\nfrom flask import Flask, render_template, request, redirect, url_for\nfrom flask_sqlalchemy import SQLAlchemy\nfrom werkzeug.exceptions import BadRequest\n\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///todo.db'\napp.config['SECRET_KEY'] = 'secret-key'\n\ndb = SQLAlchemy(app)\n\n\nclass Task(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    title = db.Column(db.String(100), nullable=False)\n    completed = db.Column(db.Boolean, default=False)\n\n    def __repr__(self):\n        return f'Task({self.title}, {self.completed})'\n\n\n@app.route('/')\ndef index():\n    \"\"\"Renvoie l'index de la To-Do List\"\"\"\n    tasks = Task.query.all()\n    return render_template('index.html', tasks=tasks)\n\n\n@app.route('/add', methods=['POST'])\ndef add_task():\n    \"\"\"Ajoute une nouvelle tâche\"\"\"\n    try:\n        title = request.form['title']\n        task = Task(title=title)\n        db.session.add(task)\n        db.session.commit()\n        return redirect(url_for('index'))\n    except BadRequest:\n        return 'Erreur: titre requis', 400\n\n\n@app.route('/complete/<int:task_id>')\ndef complete_task(task_id):\n    \"\"\"Termine la tâche\"\"\"\n    task = Task.query.get(task_id)\n    if task:\n        task.completed = True\n  print('Erreur tentative 1'  # Guillemet manquant (bug)\n        db.session.commit()\n        return redirect(url_for('index'))\n    else:\n        return 'Erreur: tâche non trouvée', 404\n\n\n@app.route('/delete/<int:task_id>')\ndef delete_task(task_id):\n    \"\"\"Supprime la tâche\"\"\"\n    task = Task.query.get(task_id)\n    if task:\n        db.session.delete(task)\n        db.session.commit()\n        return redirect(url_for('index'))\n    else:\n        return 'Erreur: tâche non trouvée', 404\n\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "langage": "python", "bugs_introduits": ["syntax_error"], "corrections_appliquees": [], "timestamp": 1767108842.7402973, "tentative": 1}