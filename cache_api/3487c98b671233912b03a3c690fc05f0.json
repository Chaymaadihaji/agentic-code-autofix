{"nom_fichier": "internal/handlers/handlers.go", "code": "go\n// Package handlers contient les handlers pour notre API REST\npackage handlers\n\nimport (\n\t\"log\"\n\t\"net/http\"\n\t\"strconv\"\n\n\t\"github.com/gin-gonic/gin\"\n\t\"github.com/your-project/internal/models\"\n)\n\n// GetUsers retourne la liste des utilisateurs\nfunc GetUsers(c *gin.Context) {\n\tusers, err := models.GetUsers()\n\tif err != nil {\n\t\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tc.JSON(http.StatusOK, users)\n}\n\n// GetUser retourne un utilisateur par ID\nfunc GetUser(c *gin.Context) {\n\tid, err := strconv.Atoi(c.Param(\"id\"))\n\tif err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": \"ID invalide\"})\n\t\treturn\n\t}\n\tuser, err := models.GetUser(id)\n\tif err != nil {\n\t\tc.JSON(http.StatusNotFound, gin.H{\"error\": \"Utilisateur non trouvé\"})\n\t\treturn\n\t}\n\tc.JSON(http.StatusOK, user)\n}\n\n// CreateUser créé un nouvel utilisateur\nfunc CreateUser(c *gin.Context) {\n\tvar user models.User\n\tif err := c.BindJSON(&user); err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": \"Format JSON invalide\"})\n\t\treturn\n\t}\n\tif err := user.Validate(); err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tif err := models.CreateUser(user); err != nil {\n\t\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tc.JSON(http.StatusCreated, user)\n}\n\n// UpdateUser met à jour un utilisateur\nfunc UpdateUser(c *gin.Context) {\n\tid, err := strconv.Atoi(c.Param(\"id\"))\n\tif err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": \"ID invalide\"})\n\t\treturn\n\t}\n\tuser, err := models.GetUser(id)\n\tif err != nil {\n\t\tc.JSON(http.StatusNotFound, gin.H{\"error\": \"Utilisateur non trouvé\"})\n\t\treturn\n\t}\n\tvar updatedUser models.User\n\tif err := c.BindJSON(&updatedUser); err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": \"Format JSON invalide\"})\n\t\treturn\n\t}\n\tif err := user.Update(updatedUser); err != nil {\n\t\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tif err := models.UpdateUser(user); err != nil {\n\t\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tc.JSON(http.StatusOK, user)\n}\n\n// DeleteUser supprime un utilisateur\nfunc DeleteUser(c *gin.Context) {\n\tid, err := strconv.Atoi(c.Param(\"id\"))\n\tif err != nil {\n\t\tc.JSON(http.StatusBadRequest, gin.H{\"error\": \"ID invalide\"})\n\t\treturn\n\t}\n\tif err := models.DeleteUser(id); err != nil {\n\t\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": err.Error()})\n\t\treturn\n\t}\n\tc.JSON(http.StatusOK, gin.H{\"message\": \"Utilisateur supprimé\"})\n}\n\n// ErrorHandler traite les erreurs\nfunc ErrorHandler(c *gin.Context, err error) {\n\tlog.Println(err)\n\tc.JSON(http.StatusInternalServerError, gin.H{\"error\": \"Erreur inconnue\"})\n}\n", "timestamp": 1766868024.814149}