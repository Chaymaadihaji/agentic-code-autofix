{"nom_fichier": "dashboard.py", "code": "# dashboard.py\n\nimport os\nimport json\nfrom flask import Flask, render_template, request\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_bcrypt import Bcrypt\nfrom flask_limiter import Limiter\nfrom flask_limiter.util import get_remote_address\n\n# Configuration de l'application\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///dashboard.db'\napp.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\napp.config['SECRET_KEY'] = os.urandom(32)\n\n# Initialisation des outils\ndb = SQLAlchemy(app)\nbcrypt = Bcrypt(app)\nlimiter = Limiter(app, key_func=get_remote_address)\n\n# Modèles de données\nclass Patient(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    nom = db.Column(db.String(100), nullable=False)\n    prenom = db.Column(db.String(100), nullable=False)\n    date_naissance = db.Column(db.Date, nullable=False)\n\nclass Ordonnance(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    patient_id = db.Column(db.Integer, db.ForeignKey('patient.id'), nullable=False)\n    medicament = db.Column(db.String(100), nullable=False)\n    dosage = db.Column(db.String(100), nullable=False)\n\nclass RendezVous(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    patient_id = db.Column(db.Integer, db.ForeignKey('patient.id'), nullable=False)\n    date = db.Column(db.Date, nullable=False)\n    heure = db.Column(db.Time, nullable=False)\n\nclass DossierMedical(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    patient_id = db.Column(db.Integer, db.ForeignKey('patient.id'), nullable=False)\n    contenu = db.Column(db.Text, nullable=False)\n\n# Fonctionnalités\n@app.route('/')\ndef index():\n    patients = Patient.query.all()\n    return render_template('index.html', patients=patients)\n\n@app.route('/fiches_patients')\ndef fiches_patients():\n    patients = Patient.query.all()\n    return render_template('fiches_patients.html', patients=patients)\n\n@app.route('/historique_medical')\ndef historique_medical():\n    patients = Patient.query.all()\n    return render_template('historique_medical.html', patients=patients)\n\n@app.route('/ordonnances')\ndef ordonnances():\n    ordonnances = Ordonnance.query.all()\n    return render_template('ordonnances.html', ordonnances=ordonnances)\n\n@app.route('/rendez_vous')\ndef rendez_vous():\n    rendez_vous = RendezVous.query.all()\n    return render_template('rendez_vous.html', rendez_vous=rendez_vous)\n\n@app.route('/dossier_medical')\ndef dossier_medical():\n    dossiers_medicaux = DossierMedical.query.all()\n    return render_template('dossier_medical.html', dossiers_medicaux=dossiers_medicaux)\n\n@app.route('/graphiques')\ndef graphiques():\n    patients = Patient.query.all()\n    return render_template('graphiques.html', patients=patients)\n\n@app.route('/rapports')\ndef rapports():\n    patients = Patient.query.all()\n    return render_template('rapports.html', patients=patients)\n\n@app.route('/chiffrement')\ndef chiffrement():\n    patient = Patient.query.first()\n    password = request.form['password']\n    hashed_password = bcrypt.generate_password_hash(password).decode('utf-8')\n    patient.password = hashed_password\n    db.session.commit()\n    return 'Chiffrement effectué'\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "timestamp": 1766765547.169346}