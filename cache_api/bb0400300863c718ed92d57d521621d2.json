{"nom_fichier": "player.py", "code": "# player.py\n\nimport random\nimport json\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Fichier de mots au hasard\nmots_json = 'mots.json'\n\n# Chemin vers le fichier JSON\nchemin_json = 'static/'\n\n# Fichier de scores\nscore_json = 'scores.json'\n\n# Chemin vers le fichier JSON\nchemin_score_json = 'static/'\n\n# Lecture du fichier JSON des mots\nwith open(chemin_json + mots_json, 'r') as f:\n    mots = json.load(f)\n\n# Lecture du fichier JSON des scores\nwith open(chemin_score_json + score_json, 'r') as f:\n    scores = json.load(f)\n\n# Fonction pour générer un mot au hasard\ndef generer_mot():\n    return random.choice(list(mots.keys()))\n\n# Fonction pour afficher le pendu\ndef afficher_pendu(lettres_soulignees, lettres_saisies, essais):\n    pendu = ''\n    for lettre in lettres_soulignees:\n        if lettre in lettres_saisies:\n            pendu += lettre + ' '\n        else:\n            pendu += '_ '\n    return pendu\n\n# Fonction pour valider la saisie de lettres\ndef valider_saisie(lettre):\n    return len(lettre) == 1 and lettre.isalpha()\n\n# Fonction pour gérer le jeu\ndef jouer_jeu():\n    mot = generer_mot()\n    lettres_soulignees = ['_'] * len(mot)\n    lettres_saisies = []\n    essais = 6\n    score = 0\n    while essais > 0 and '_' in lettres_soulignees:\n        print(afficher_pendu(lettres_soulignees, lettres_saisies, essais))\n        saisi = input(\"Saisir une lettre : \").lower()\n        if valider_saisie(saisi):\n            lettres_saisies.append(saisi)\n            if saisi in mot:\n                for i, lettre in enumerate(mot):\n                    if lettre == saisi:\n                        lettres_soulignees[i] = saisi\n            else:\n                essais -= 1\n        else:\n            print(\"Saisie invalid\")\n    if '_' not in lettres_soulignees:\n        score += 1\n        print(\"Félicitations, vous avez gagné !\")\n    else:\n        print(\"Désolé, vous avez perdu !\")\n    return score\n\n# Fonction pour afficher les scores\ndef afficher_scores():\n    print(\"Scores :\")\n    for joueur, score in scores.items():\n        print(f\"{joueur} : {score}\")\n\n# Route pour la page d'accueil\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n# Route pour le jeu\n@app.route('/jeu', methods=['GET', 'POST'])\ndef jouer():\n    if request.method == 'GET':\n        return render_template('jeu.html')\n    elif request.method == 'POST':\n        saisie = request.form['saisie']\n        if valider_saisie(saisie):\n            scores[saisie] = scores.get(saisie, 0) + jouer_jeu()\n            with open(chemin_score_json + score_json, 'w') as f:\n                json.dump(scores, f)\n            return render_template('jeu.html', scores=scores)\n        else:\n            return 'Saisie invalid'\n\n# Route pour les scores\n@app.route('/scores')\ndef scores():\n    return render_template('scores.html', scores=scores)\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830264.8366995}