{"nom_fichier": "main.py", "code": "import random\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Mots à deviner\nmots = ['apple', 'banana', 'cherry', 'date', 'elderberry']\n\n# État du jeu\netat_jeu = {\n    'mot': random.choice(mots),\n    'lettres_proposes': [],\n    'lettres_reussies': [],\n    'lettres_erreur': [],\n    'vies': 6,\n    'score': 0\n}\n\n# Fonction pour générer le pendu\ndef generate_pendu(vies):\n    if vies == 6:\n        return ['O']\n    elif vies == 5:\n        return ['O', '|']\n    elif vies == 4:\n        return ['O', '|', '/']\n    elif vies == 3:\n        return ['O', '|', '/', '\\\\']\n    elif vies == 2:\n        return ['O', '|', '/', '\\\\', '\\\\']\n    elif vies == 1:\n        return ['O', '|', '/', '\\\\', '\\\\', '/']\n    else:\n        return ['X', '|', '/', '\\\\', '\\\\', '/']\n\n# Route pour afficher le jeu\n@app.route('/', methods=['GET', 'POST'])\ndef jeu():\n    global etat_jeu\n    if request.method == 'POST':\n        lettre = request.form['lettre']\n        etat_jeu['lettres_proposes'].append(lettre)\n        if len(lettre) != 1 or not lettre.isalpha():\n            return render_template('jeu.html', etat_jeu=etat_jeu, pendu=generate_pendu(etat_jeu['vies']), erreurs='Veuillez saisir une lettre.')\n        elif lettre in etat_jeu['lettres_reussies'] or lettre in etat_jeu['lettres_erreur']:\n            return render_template('jeu.html', etat_jeu=etat_jeu, pendu=generate_pendu(etat_jeu['vies']), erreurs='Veuillez saisir une lettre qui n\\'a pas encore été proposée.')\n        else:\n            if lettre in etat_jeu['mot']:\n                etat_jeu['lettres_reussies'].append(lettre)\n                if len(etat_jeu['lettres_reussies']) == len(etat_jeu['mot']):\n                    etat_jeu['score'] += 10\n                    etat_jeu['vies'] = 6\n                    return render_template('jeu.html', etat_jeu=etat_jeu, pendu=generate_pendu(etat_jeu['vies']), succes='Félicitations, vous avez gagné!')\n            else:\n                etat_jeu['lettres_erreur'].append(lettre)\n                etat_jeu['vies'] -= 1\n                if etat_jeu['vies'] == 0:\n                    etat_jeu['score'] -= 10\n                    return render_template('jeu.html', etat_jeu=etat_jeu, pendu=generate_pendu(etat_jeu['vies']), erreurs='Désolé, vous avez perdu.')\n    return render_template('jeu.html', etat_jeu=etat_jeu, pendu=generate_pendu(etat_jeu['vies']))\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766863500.7059891}