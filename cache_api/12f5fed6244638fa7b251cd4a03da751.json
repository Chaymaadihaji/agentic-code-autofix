{"nom_fichier": "app.py", "code": "# app.py\n\nimport pandas as pd\nimport numpy as np\nimport json\nfrom flask import Flask, render_template, jsonify\nimport matplotlib.pyplot as plt\nfrom matplotlib.backends.backend_agg import FigureCanvasAgg as FigureCanvas\nfrom matplotlib.figure import Figure\nimport folium\nfrom dash import Dash, dcc, html\nfrom dash.dependencies import Input, Output\nimport plotly.graph_objects as go\nfrom datetime import datetime, timedelta\n\napp = Flask(__name__)\n\n# Génération de données\nnp.random.seed(0)\ndonnees_meteo = {\n    \"temperature\": np.random.uniform(15, 30, 24),\n    \"humidite\": np.random.uniform(50, 90, 24),\n    \"pression\": np.random.uniform(980, 1020, 24),\n    \"vitesse_vent\": np.random.uniform(0, 50, 24),\n}\n\n# Calcul des statistiques/métriques\nstats_meteo = {\n    \"temperature_min\": min(donnees_meteo[\"temperature\"]),\n    \"temperature_max\": max(donnees_meteo[\"temperature\"]),\n    \"humidite_min\": min(donnees_meteo[\"humidite\"]),\n    \"humidite_max\": max(donnees_meteo[\"humidite\"]),\n    \"pression_min\": min(donnees_meteo[\"pression\"]),\n    \"pression_max\": max(donnees_meteo[\"pression\"]),\n    \"vitesse_vent_min\": min(donnees_meteo[\"vitesse_vent\"]),\n    \"vitesse_vent_max\": max(donnees_meteo[\"vitesse_vent\"]),\n}\n\n# API pour les données en temps réel\n@app.route(\"/donnees_meteo\")\ndef donnees_meteo_api():\n    return jsonify(donnees_meteo)\n\n# Structure modulaire pour différentes visualisations\ndef carte_meteo():\n    m = folium.Map(location=[45.764043, 4.835659], zoom_start=12)\n    folium.Marker([45.764043, 4.835659], popup=\"Météo Lyon\").add_to(m)\n    return m\n\ndef graphique_temperature():\n    fig = Figure()\n    ax = fig.add_subplot(111)\n    ax.plot(donnees_meteo[\"temperature\"])\n    return FigureCanvas(fig)\n\ndef graphique_humidite():\n    fig = Figure()\n    ax = fig.add_subplot(111)\n    ax.plot(donnees_meteo[\"humidite\"])\n    return FigureCanvas(fig)\n\ndef graphique_pression():\n    fig = Figure()\n    ax = fig.add_subplot(111)\n    ax.plot(donnees_meteo[\"pression\"])\n    return FigureCanvas(fig)\n\ndef graphique_vitesse_vent():\n    fig = Figure()\n    ax = fig.add_subplot(111)\n    ax.plot(donnees_meteo[\"vitesse_vent\"])\n    return FigureCanvas(fig)\n\ndef graphique_stats_meteo():\n    fig = Figure()\n    ax = fig.add_subplot(111)\n    ax.bar(stats_meteo.keys(), stats_meteo.values())\n    return FigureCanvas(fig)\n\n# Interface web\n@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\")\n\n# Lancement de l'app\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766829766.5072992}