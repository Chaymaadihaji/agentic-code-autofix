{"nom_fichier": "ui.py", "code": "# ui.py\n\nimport json\nfrom flask import Flask, render_template, request, jsonify\nimport random\n\napp = Flask(__name__)\n\n# Jeu\nclass Jeu:\n    def __init__(self):\n        self.vies = 3\n        self.score = 0\n        self.niveau = 1\n        self.monde = 1\n        self.pièces = 0\n        self.ennemis = []\n        self.plateformes = []\n        self.boss = False\n\n    def bouger_ennemis(self):\n        for ennemi in self.ennemis:\n            ennemi['x'] += random.randint(-1, 1)\n\n    def bouger_plateformes(self):\n        for plateforme in self.plateformes:\n            plateforme['y'] += random.randint(-1, 1)\n\n    def gagner_vie(self):\n        self.vies += 1\n\n    def perdre_vie(self):\n        self.vies -= 1\n\n    def collecter_pièce(self):\n        self.pièces += 1\n\n    def passer_niveau(self):\n        self.niveau += 1\n        self.monde += 1\n        self.boss = False\n\n    def affronter_boss(self):\n        self.boss = True\n\n# Données\njeu = Jeu()\n\n# Fonctions\ndef charger_niveau(niveau):\n    with open(f'niveau{niveau}.json', 'r') as f:\n        return json.load(f)\n\ndef sauvegarder_jeu():\n    with open('jeu.json', 'w') as f:\n        json.dump({\n            'vies': jeu.vies,\n            'score': jeu.score,\n            'niveau': jeu.niveau,\n            'monde': jeu.monde,\n            'pièces': jeu.pièces,\n            'ennemis': jeu.ennemis,\n            'plateformes': jeu.plateformes,\n            'boss': jeu.boss\n        }, f)\n\ndef charger_jeu():\n    try:\n        with open('jeu.json', 'r') as f:\n            return json.load(f)\n    except FileNotFoundError:\n        return {\n            'vies': 3,\n            'score': 0,\n            'niveau': 1,\n            'monde': 1,\n            'pièces': 0,\n            'ennemis': [],\n            'plateformes': [],\n            'boss': False\n        }\n\n# Routes\n@app.route('/')\ndef index():\n    return render_template('index.html', jeu=charger_jeu())\n\n@app.route('/niveau/<int:niveau>')\ndef niveau(niveau):\n    jeu = charger_jeu()\n    jeu.niveau = niveau\n    jeu.ennemis = charger_niveau(niveau)['ennemis']\n    jeu.plateformes = charger_niveau(niveau)['plateformes']\n    jeu.boss = charger_niveau(niveau)['boss']\n    sauvegarder_jeu()\n    return render_template('niveau.html', jeu=jeu)\n\n@app.route('/collecter', methods=['POST'])\ndef collecter():\n    jeu = charger_jeu()\n    jeu.collecter_pièce()\n    sauvegarder_jeu()\n    return jsonify({'message': 'Pièce collectée'})\n\n@app.route('/vies', methods=['POST'])\ndef vies():\n    jeu = charger_jeu()\n    jeu.gagner_vie()\n    sauvegarder_jeu()\n    return jsonify({'message': 'Vie gagnée'})\n\n@app.route('/perdre', methods=['POST'])\ndef perdre():\n    jeu = charger_jeu()\n    jeu.perdre_vie()\n    sauvegarder_jeu()\n    return jsonify({'message': 'Vie perdue'})\n\n@app.route('/niveau_suivant', methods=['POST'])\ndef niveau_suivant():\n    jeu = charger_jeu()\n    jeu.passer_niveau()\n    sauvegarder_jeu()\n    return jsonify({'message': 'Niveau suivant'})\n\n@app.route('/affronter_boss', methods=['POST'])\ndef affronter_boss():\n    jeu = charger_jeu()\n    jeu.affronter_boss()\n    sauvegarder_jeu()\n    return jsonify({'message': 'Boss affronté'})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766865147.3039978}