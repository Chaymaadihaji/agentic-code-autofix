{"nom_fichier": "app.py", "code": "import streamlit as st\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport json\nfrom datetime import datetime\n\n# Chargement de données CSV\n@st.cache\ndef load_data(file):\n    try:\n        return pd.read_csv(file)\n    except Exception as e:\n        st.error(\"Erreur lors du chargement des données : \" + str(e))\n\n# Génération de données pour le dashboard\ndef generate_data():\n    data = {\n        \"date\": [datetime(2022, 1, 1), datetime(2022, 1, 2), datetime(2022, 1, 3)],\n        \"valeur\": [10, 20, 30]\n    }\n    return pd.DataFrame(data)\n\n# Calcul des statistiques/métriques\ndef calculate_stats(data):\n    stats = {\n        \"mean\": data[\"valeur\"].mean(),\n        \"median\": data[\"valeur\"].median(),\n        \"max\": data[\"valeur\"].max(),\n        \"min\": data[\"valeur\"].min()\n    }\n    return stats\n\n# API pour les données en temps réel\ndef get_realtime_data():\n    with open(\"data.json\", \"r\") as f:\n        return json.load(f)\n\n# Structure modulaire pour différentes visualisations\ndef plot_line_chart(data):\n    plt.figure(figsize=(10, 6))\n    sns.lineplot(x=\"date\", y=\"valeur\", data=data)\n    plt.title(\"Ligne de temps\")\n    plt.xlabel(\"Date\")\n    plt.ylabel(\"Valeur\")\n    return plt\n\n# Structure modulaire pour différentes visualisations\ndef plot_bar_chart(data):\n    plt.figure(figsize=(10, 6))\n    sns.barplot(x=\"date\", y=\"valeur\", data=data)\n    plt.title(\"Barème\")\n    plt.xlabel(\"Date\")\n    plt.ylabel(\"Valeur\")\n    return plt\n\n# Application\nif __name__ == \"__main__\":\n    st.title(\"Dashboard\")\n\n    # Chargement de données CSV\n    file = st.file_uploader(\"Uploader un fichier CSV\")\n    if file:\n        data = load_data(file.name)\n        st.write(data)\n\n    # Génération de données pour le dashboard\n    data = generate_data()\n    st.write(data)\n\n    # Calcul des statistiques/métriques\n    stats = calculate_stats(data)\n    st.write(\"Statistiques :\")\n    st.write(stats)\n\n    # API pour les données en temps réel\n    realtime_data = get_realtime_data()\n    st.write(\"Données en temps réel :\")\n    st.write(realtime_data)\n\n    # Structure modulaire pour différentes visualisations\n    select_box = st.selectbox(\"Sélectionner une visualisation\", [\"Ligne de temps\", \"Barème\"])\n    if select_box == \"Ligne de temps\":\n        fig = plot_line_chart(data)\n    elif select_box == \"Barème\":\n        fig = plot_bar_chart(data)\n    st.pyplot(fig)\n\n    # Export de données\n    if st.button(\"Exporter données\"):\n        st.download_button(\"Télécharger les données\", data.to_csv(index=False), \"data.csv\", \"text/csv\")\n", "timestamp": 1766751428.152982}