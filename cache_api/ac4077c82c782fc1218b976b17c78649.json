{"nom_fichier": "main.py", "code": "# main.py\n\nimport random\nimport json\nfrom flask import Flask, render_template, request\nimport os\n\napp = Flask(__name__)\n\n# Chargement des mots à deviner\nwith open('mots.json') as f:\n    mots = json.load(f)\n\n# Initialisation des données de jeu\nmot_a_deviner = random.choice(list(mots.keys()))\nlettres_utilisees = set()\nerreurs = 0\nscore = 0\n\n# Fonction pour afficher le pendu\ndef afficher_pendu(erreurs):\n    pendu = [\n        ['  +---+  ', '  |   |  '],\n        ['  |   O  ' if erreurs >= 1 else '  |   |  '],\n        ['  |   |  '],\n        ['  |   |  '],\n        ['', '  |   |  '],\n        ['', '  |   |  '],\n        ['', '  |   |  '],\n        ['', '  |   |  '],\n    ]\n    return '\\n'.join(['\\n'.join(row) for row in pendu])\n\n# Fonction pour afficher les lettres restantes\ndef afficher_lettres_restantes(mot_a_deviner):\n    return ', '.join([lettre for lettre in mot_a_deviner if lettre not in lettres_utilisees])\n\n# Fonction pour vérifier si le mot a été deviné\ndef mot_devine(mot_a_deviner, lettres_utilisees):\n    return all([lettre in lettres_utilisees for lettre in mot_a_deviner])\n\n# Fonction pour vérifier si le jeu est terminé\ndef jeu_termine(erreurs, mot_devine):\n    return erreurs >= 6 or mot_devine\n\n# Route pour afficher le formulaire\n@app.route('/', methods=['GET', 'POST'])\ndef index():\n    global mot_a_deviner, lettres_utilisees, erreurs, score\n    if request.method == 'POST':\n        lettre = request.form['lettre']\n        lettres_utilisees.add(lettre)\n        if lettre not in mot_a_deviner:\n            erreurs += 1\n        if mot_devine(mot_a_deviner, lettres_utilisees):\n            score += 1\n            mot_a_deviner = random.choice(list(mots.keys()))\n            lettres_utilisees = set()\n        if jeu_termine(erreurs, mot_devine(mot_a_deviner, lettres_utilisees)):\n            return render_template('game_over.html', score=score)\n    return render_template('index.html', mot_a_deviner=mot_a_deviner, lettres_utilisees=lettres_utilisees, erreurs=erreurs, afficher_pendu=afficher_pendu(erreurs), afficher_lettres_restantes=afficher_lettres_restantes(mot_a_deviner), score=score)\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830356.3827116}