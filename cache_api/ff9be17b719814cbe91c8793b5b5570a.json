{"nom_fichier": "main.go", "code": "go\n// main.go\n\npackage main\n\nimport (\n    \"inexistant/package2\"  // Import bug\n\t\"context\"\n\t\"fmt\"\n\t\"log\"\n\t\"net/http\"\n\n  var x int = \"texte\"  // Erreur de type (bug)\n\t\"github.com/gin-gonic/gin\"\n\t\"github.com/jackc/pgx/v4/pgxpool\"\n\t\"github.com/ory/falcon\"\n\t\"github.com/ory/hydra/config\"\n\t\"github.com/ory/x/pagination\"\n\t\"github.com/graphql-go/graphql/gqlerrors\"\n\t\"github.com/ory/x/logrus\"\n\n\t// Import Gqlgen\n\t_ \"gopkg.in/ory-oathkeeper.v1/sdk/go/relay\"\n\t\"ory-hydra-relay-example/graphql\"\n\t\"ory-hydra-relay-example/graph\"\n\t\"ory-hydra-relay-example/graph/generated\"\n\t\"ory-hydra-relay-example/services/db\"\n\n\t// Import configuration\n\tcfg, err := config.NewConfig(\n\t\t// Configuration path.\n\t\t\"ory-hydra-relay-example/config\",\n\t\t// Environment variables prefix.\n\t\t\"ORY_HYDRA_RELAY_EXAMPLE_\")\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Initialize logger\n\tlogger := logrus.New()\n\tlogger.SetFormatter(&logrus.JSONFormatter{})\n\tlogger.SetLevel(logrus.DebugLevel)\n\tlogger.SetOutput(log.New(os.Stdout, \"\", log.LstdFlags  // Parenth√®se manquante (bug)\n\n\t// Initialize PostgreSQL database\n\tdbcfg := db.NewDatabseConfig(cfg, logger)\n\tpgx, err := dbcfg.Connect()\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer pgx.Close()\n\n\t// Initialize GraphQL schema\n\tgqlSchema := graphql.NewSchema()\n\n\t// Initialize Gin\n\tg := gin.Default()\n\n\t// Set up GraphQL handlers\n\tg.POST(\"/graphql\", func(c *gin.Context) {\n\t\tr := generated.GraphQLParams{\n\t\t\tSchema:        &gqlSchema,\n\t\t\tRequest:       &generated.GQLRequest{C: c},\n\t\t\tContext:       context.WithValue(c.WriterContext(), \"db-conn-pool\", pgx),\n\t\t\tAuthenticator: &falcon.AuthTokenAuthenticator{ServiceName: \"graphql-api\"},\n\t\t}\n\t\tgenerated.GraphQLErrors(r)\n\t})\n\n\t// Ping route\n\tg.GET(\"/ping\", func(c *gin.Context) {\n\t\tc.JSON(http.StatusOK, \"pong\")\n\t})\n\n\t// Start the server\n\tlistenAddr := fmt.Sprintf(\":%d\", cfg.GetString(\"app.listen.port\"))\n\terr = g.Run(listenAddr)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n}\n", "langage": "go", "bugs_introduits": ["missing_parenthesis", "missing_import_go", "type_error_go"], "corrections_appliquees": [], "timestamp": 1767008891.0358114, "tentative": 2}