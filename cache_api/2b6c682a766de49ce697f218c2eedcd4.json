{"nom_fichier": "main.py", "code": "from flask import Flask, render_template, request, jsonify\nfrom flask_wtf import FlaskForm\nfrom wtforms import StringField, SubmitField\nfrom wtforms.validators import DataRequired\nimport random\nimport json\nimport pandas as pd\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret_key'\n\n# Génération de données pour le dashboard\ndonnees = [\n    {'nom': 'Tâche 1', 'début': '2022-01-01', 'fin': '2022-01-15', 'statut': 'En cours'},\n    {'nom': 'Tâche 2', 'début': '2022-02-01', 'fin': '2022-02-28', 'statut': 'Terminé'},\n    {'nom': 'Tâche 3', 'début': '2022-03-01', 'fin': '2022-03-31', 'statut': 'En cours'},\n    {'nom': 'Tâche 4', 'début': '2022-04-01', 'fin': '2022-04-30', 'statut': 'Terminé'},\n    {'nom': 'Tâche 5', 'début': '2022-05-01', 'fin': '2022-05-31', 'statut': 'En cours'}\n]\n\n# Calcul des statistiques/métriques\ndonnees_df = pd.DataFrame(donnees)\nstatistiques = {\n    'Nombre de tâches en cours': len(donnees_df[donnees_df['statut'] == 'En cours']),\n    'Nombre de tâches terminées': len(donnees_df[donnees_df['statut'] == 'Terminé'])\n}\n\n# API pour les données en temps réel\n@app.route('/api/donnees', methods=['GET'])\ndef api_donnees():\n    return jsonify(donnees)\n\n# Structure modulaire pour différentes visualisations\nclass Formulaire(FlaskForm):\n    nom = StringField('Nom', validators=[DataRequired()])\n    debut = StringField('Début', validators=[DataRequired()])\n    fin = StringField('Fin', validators=[DataRequired()])\n    submit = SubmitField('Soumettre')\n\n@app.route('/formulaire', methods=['GET', 'POST'])\ndef formulaire():\n    form = Formulaire()\n    if form.validate_on_submit():\n        nouvelle_tache = {\n            'nom': form.nom.data,\n            'début': form.debut.data,\n            'fin': form.fin.data,\n            'statut': 'En cours'\n        }\n        donnees.append(nouvelle_tache)\n        return jsonify({'message': 'La tâche a été ajoutée avec succès'})\n    return render_template('formulaire.html', form=form)\n\n@app.route('/liste', methods=['GET'])\ndef liste():\n    return render_template('liste.html', donnees=donnees)\n\n@app.route('/statistiques', methods=['GET'])\ndef statistiques_route():\n    return render_template('statistiques.html', statistiques=statistiques)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766330369.9903157}