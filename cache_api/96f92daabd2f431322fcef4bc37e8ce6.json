{"nom_fichier": "config.py", "code": "# config.py\n\nimport os\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Paramètres de configuration\nMOT_MAX_LONGUEUR = 10\nSCORE_MIN = 0\nSCORE_MAX = 100\nNIVEAUX = [\n    {\"nom\": \"Débutant\", \"score_min\": SCORE_MIN, \"score_max\": 20},\n    {\"nom\": \"Intermédiaire\", \"score_min\": 21, \"score_max\": 60},\n    {\"nom\": \"Avancé\", \"score_min\": 61, \"score_max\": SCORE_MAX}\n]\n\n# Dictionnaire de mots au hasard\nmots = {\n    \"animal\": [\"chat\", \"chien\", \"oiseau\", \"lapin\", \"singe\"],\n    \"fruits\": [\"pomme\", \"poire\", \"abricot\", \"fraise\", \"banane\"],\n    \"couleurs\": [\"bleu\", \"rouge\", \"vert\", \"jaune\", \"orange\"]\n}\n\n# Fichier de sauvegarde des scores\nfichier_scores = \"scores.json\"\n\n# Fonction de génération d'un mot au hasard\ndef generer_mot(niveau):\n    mots_niveau = mots.get(niveaux[niveau][\"nom\"], [])\n    return random.choice(mots_niveau)\n\n# Fonction de gestion du score\ndef gestion_score(score):\n    for niveau in NIVEAUX:\n        if niveau[\"score_min\"] <= score <= niveau[\"score_max\"]:\n            return niveau[\"nom\"]\n\n# Fonction de sauvegarde des scores\ndef sauvegarder_scores(scores):\n    with open(fichier_scores, \"w\") as fichier:\n        fichier.write(json.dumps(scores))\n\n# Fonction de chargement des scores\ndef charger_scores():\n    try:\n        with open(fichier_scores, \"r\") as fichier:\n            return json.loads(fichier.read())\n    except FileNotFoundError:\n        return {}\n\n# Fonction de génération du pendu\ndef generer_pendu(lettres_trouvees, lettre_essaiee):\n    pendu = \"\"\n    for lettre in mots[\"animal\"][0]:\n        if lettre in lettres_trouvees:\n            pendu += lettre\n        else:\n            pendu += \"_\"\n    return pendu\n\n# Fonction de gestion de l'état du jeu\ndef gestion_jeu(mot, lettres_trouvees, erreur):\n    if erreur >= 6:\n        return \"Perdu\"\n    elif \"_\" not in mot:\n        return \"Gagné\"\n    else:\n        return \"En cours\"\n\n# Fonction de saisie de lettres\ndef saisie_lettre(lettre):\n    return lettre.lower()\n\n# Fonction de génération du tableau de scores\ndef generer_tableau_scores(scores):\n    return [{\"nom\": nom, \"score\": score} for nom, score in scores.items()]\n\n# Fonction de gestion des erreurs\ndef gestion_erreur(lettre_essaiee, mot):\n    if lettre_essaiee not in mot:\n        return True\n    else:\n        return False\n\n# Définition des routes\n@app.route(\"/\")\ndef accueil():\n    return render_template(\"accueil.html\")\n\n@app.route(\"/jeu\", methods=[\"GET\", \"POST\"])\ndef jeu():\n    if request.method == \"POST\":\n        lettre = request.form[\"lettre\"]\n        mot = generer_mot(0)\n        lettres_trouvees = \"\"\n        erreur = 0\n        score = 0\n        scores = charger_scores()\n        scores[\"nom\"] = request.form[\"nom\"]\n        scores[\"score\"] = score\n        sauvegarder_scores(scores)\n        if gestion_erreur(lettre, mot):\n            erreur += 1\n        else:\n            lettres_trouvees += lettre\n        return render_template(\"jeu.html\", mot=mot, lettres_trouvees=lettres_trouvees, erreur=erreur, score=score)\n    else:\n        mot = generer_mot(0)\n        lettres_trouvees = \"\"\n        erreur = 0\n        score = 0\n        scores = charger_scores()\n        return render_template(\"jeu.html\", mot=mot, lettres_trouvees=lettres_trouvees, erreur=erreur, score=score)\n\n@app.route(\"/scores\")\ndef scores():\n    scores = charger_scores()\n    tableau_scores = generer_tableau_scores(scores)\n    return render_template(\"scores.html\", tableau_scores=tableau_scores)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830337.331044}