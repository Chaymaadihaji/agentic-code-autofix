{"nom_fichier": "main.py", "code": "import json\nfrom flask import Flask, request, jsonify\nimport unicodedata\n\napp = Flask(__name__)\n\n# Fichier de données en JSON\ndonnees = 'donnees.json'\n\n# Chargement des données en mémoire\nwith open(donnees, 'r') as f:\n    donnees_json = json.load(f)\n\n# Fonction pour gérer les caractères Unicode\ndef gérer_caractères_Unicode(caractere):\n    return unicodedata.normalize('NFKD', caractere).encode('ascii', 'ignore').decode('utf-8')\n\n# Fonction pour gérer les noms de variables avec accents\ndef gérer_noms_variables(nom):\n    return nom.replace('é', 'e').replace('è', 'e').replace('ê', 'e').replace('ë', 'e').replace('à', 'a').replace('è', 'a').replace('ù', 'u')\n\n# Route pour afficher les données\n@app.route('/donnees', methods=['GET'])\ndef afficher_donnees():\n    return jsonify(donnees_json)\n\n# Route pour ajouter une nouvelle donnée\n@app.route('/donnees', methods=['POST'])\ndef ajouter_donnée():\n    nouvelle_donnée = request.json\n    nouvelle_donnée['caractères'] = [gerer_caractères_Unicode(caractere) for caractere in nouvelle_donnée['caractères']]\n    nouvelle_donnée['noms_variables'] = [gerer_noms_variables(nom) for nom in nouvelle_donnée['noms_variables']]\n    donnees_json.append(nouvelle_donnée)\n    with open(donnees, 'w') as f:\n        json.dump(donnees_json, f, indent=4)\n    return jsonify(nouvelle_donnée), 201\n\n# Route pour supprimer une donnée\n@app.route('/donnees/<int:id>', methods=['DELETE'])\ndef supprimer_donnée(id):\n    for i, donnée in enumerate(donnees_json):\n        if i == id:\n            del donnees_json[i]\n            with open(donnees, 'w') as f:\n                json.dump(donnees_json, f, indent=4)\n            return jsonify({'message': 'Donnée supprimée'})\n    return jsonify({'message': 'Donnée non trouvée'}), 404\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766831758.4090872}