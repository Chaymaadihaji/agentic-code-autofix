{"nom_fichier": "README.md", "code": "go\npackage main\n\nimport (\n\t\"log\"\n\n\t\"github.com/graphql-go/graphql\"\n\t\"github.com/graphql-go/graphql/gqlerrors\"\n\t\"github.com/graphql-go/graphql/outil\"\n\t\"github.com/urfave/negroni\"\n)\n\nfunc main() {\n\t// Initialisation de la base de données\n\tdb := InitDB()\n\n\t// Création du schéma GraphQL\n\tschema := NewSchema(db)\n\n\t// Initialisation du serveur GraphQL\n\tsrv := InitServer(schema)\n\n\t// Définition du middleware\n\tmiddleware := negroni.New()\n\tmiddleware.UseFunc(func(wrkr http.ResponseWriter, r *http.Request, next http.HandlerFunc) {\n\t\t// Mise en place de la stratégie d'authentification\n\t\ttoken, err := Token(r)\n\t\tif err != nil {\n\t\t\thttp.Error(wrkr, err.Error(), http.StatusUnauthorized)\n\t\t\treturn\n\t\t}\n\n\t\t// Exécution de la prochaine fonction du middleware\n\t\tnext(wrkr, r)\n\t})\n\n\t// Exécution du serveur\n\tnegroni.ListenAndServe(srv, \":8080\")\n}\n\nfunc Token(r *http.Request) (*jwt.Token, error) {\n\t// Extraction du header HTTP Authorization\n\tauthHeader := r.Header.Get(\"Authorization\")\n\n\t// Éxtraction du token JWT\n\ttokenString := strings.TrimPrefix(authHeader, \"Bearer \")\n\n\t// Décodage du token JWT\n\ttoken, err := jwt.Parse(tokenString, func(token *jwt.Token) (interface{}, error) {\n\t\treturn []byte(\"SecretKey\"), nil\n\t})\n\n\treturn token, err\n}\n", "bugs_introduits": [], "timestamp": 1767006945.2589622}