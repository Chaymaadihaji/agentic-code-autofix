{"nom_fichier": "requirements.txt", "code": "Flask==2.3.3\npython-dotenv==1.0.0\nflask-bootstrap==3.3.0.0\nflask-fontawesome==2.0.0\nflask-wtf==1.0.1\nflask-sqlalchemy==2.5.1\nflask-login==0.5.0\nflask-session==0.4.0\nwtforms==3.0.1\nwtforms_sqlalchemy==1.4.0\nsqlalchemy==1.4.40\npandas==1.5.1\nnumpy==1.24.2\nmatplotlib==3.6.2\nseaborn==0.12.2\npypendu==1.0.0\n\nrequirements.txt\n\nimport os\nfrom flask import Flask, render_template, request, redirect, url_for, session\nfrom flask_wtf import FlaskForm\nfrom wtforms import StringField, SubmitField\nfrom wtforms.validators import DataRequired\nfrom flask_sqlalchemy import SQLAlchemy\nfrom flask_login import LoginManager, UserMixin, login_required, login_user, logout_user, current_user\nfrom flask_session import Session\nimport random\nimport string\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = os.getenv('SECRET_KEY')\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///database.db'\napp.config['SESSION_PERMANENT'] = False\napp.config['SESSION_TYPE'] = 'filesystem'\n\ndb = SQLAlchemy(app)\nSession(app)\n\nlogin_manager = LoginManager()\nlogin_manager.init_app(app)\n\nclass User(UserMixin, db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    username = db.Column(db.String(64), unique=True, nullable=False)\n    password = db.Column(db.String(128), nullable=False)\n\nclass Word(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    word = db.Column(db.String(64), unique=True, nullable=False)\n\nclass GameForm(FlaskForm):\n    guess = StringField('Guess', validators=[DataRequired()])\n    submit = SubmitField('Submit')\n\n@login_manager.user_loader\ndef load_user(user_id):\n    return User.query.get(int(user_id))\n\n@app.route('/')\ndef index():\n    words = Word.query.all()\n    return render_template('index.html', words=words)\n\n@app.route('/play/<int:word_id>')\ndef play(word_id):\n    word = Word.query.get(word_id)\n    form = GameForm()\n    return render_template('play.html', word=word, form=form)\n\n@app.route('/submit', methods=['POST'])\n@login_required\ndef submit():\n    form = GameForm(request.form)\n    if form.validate():\n        guess = form.guess.data\n        word = Word.query.get(current_user.id)\n        if guess == word.word:\n            return redirect(url_for('win'))\n        else:\n            return redirect(url_for('lose'))\n    else:\n        return 'Invalid guess'\n\n@app.route('/win')\ndef win():\n    return 'You win!'\n\n@app.route('/lose')\ndef lose():\n    return 'You lose!'\n\n@app.route('/join', methods=['POST'])\ndef join():\n    username = request.form['username']\n    password = request.form['password']\n    user = User.query.filter_by(username=username).first()\n    if user and user.password == password:\n        login_user(user)\n        return redirect(url_for('index'))\n    else:\n        return 'Invalid credentials'\n\n@app.route('/create', methods=['POST'])\ndef create():\n    word = request.form['word']\n    user = User.query.filter_by(username=current_user.username).first()\n    new_word = Word(word=word)\n    db.session.add(new_word)\n    db.session.commit()\n    return redirect(url_for('index'))\n\n@app.route('/logout')\n@login_required\ndef logout():\n    logout_user()\n    return redirect(url_for('index'))\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "timestamp": 1766861756.1540027}