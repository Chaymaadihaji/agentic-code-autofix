{"nom_fichier": "game.py", "code": "import random\nimport json\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Fichier de données avec les mots à deviner\nmots = json.load(open('mots.json'))\n\n# État du jeu\netat = {\n    'mot': '',\n    'lettres': [],\n    'erreurs': 0,\n    'score': 0\n}\n\n# Fonction pour génération d'un mot au hasard\ndef mot_au_hazard():\n    return random.choice(list(mots.keys()))\n\n# Fonction pour affichage du pendu\ndef affichage_pendu(erreurs):\n    return f\"{'_ ' * (len(etat['mot']) - erreurs)} {ereurs * 'X '}\"\n\n# Fonction pour gestion de l'état du jeu\ndef gestion_etat(lettre):\n    global etat\n    if lettre in etat['mot']:\n        etat['lettres'].append(lettre)\n    else:\n        etat['erreurs'] += 1\n    if etat['erreurs'] == 6:\n        etat['score'] = 0\n        return False\n    if len(etat['lettres']) == len(etat['mot']):\n        etat['score'] += 1\n        return True\n    return True\n\n# Route pour formulaire de saisie de lettres\n@app.route('/', methods=['GET', 'POST'])\ndef formulaire_saisie():\n    if request.method == 'POST':\n        lettre = request.form['lettre']\n        if gestion_etat(lettre):\n            return render_template('formulaire.html', mot=etat['mot'], lettres=etat['lettres'], erreurs=etat['erreurs'], score=etat['score'])\n        else:\n            return render_template('game_over.html', score=etat['score'])\n    return render_template('formulaire.html', mot=mot_au_hazard(), lettres=[], erreurs=0, score=0)\n\n# Route pour affichage du pendu\n@app.route('/pendu')\ndef affichage():\n    return render_template('pendu.html', pendu=affichage_pendu(etat['erreurs']))\n\n# Route pour affichage du score\n@app.route('/score')\ndef score():\n    return render_template('score.html', score=etat['score'])\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830317.3683276}