{"nom_fichier": "templates/dashboard.html", "code": "<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Gestionnaire de tâches</title>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/5.0.2/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css\">\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n        }\n    </style>\n</head>\n<body>\n    <header>\n        <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n            <div class=\"container-fluid\">\n                <a class=\"navbar-brand\" href=\"#\">Gestionnaire de tâches</a>\n                <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span class=\"navbar-toggler-icon\"></span>\n                </button>\n                <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                    <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link active\" aria-current=\"page\" href=\"#\">Accueil</a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"#\">Tâches</a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a class=\"nav-link\" href=\"#\">Statistiques</a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </nav>\n    </header>\n    <main>\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <h2>Tâches</h2>\n                    <form class=\"form-horizontal\" id=\"form-taches\">\n                        <div class=\"form-group\">\n                            <label for=\"nom-tache\">Nom de la tâche</label>\n                            <input type=\"text\" class=\"form-control\" id=\"nom-tache\" required>\n                        </div>\n                        <div class=\"form-group\">\n                            <label for=\"description-tache\">Description de la tâche</label>\n                            <textarea class=\"form-control\" id=\"description-tache\" required></textarea>\n                        </div>\n                        <button type=\"submit\" class=\"btn btn-primary\">Ajouter</button>\n                    </form>\n                    <table class=\"table table-striped\">\n                        <thead>\n                            <tr>\n                                <th>Nom de la tâche</th>\n                                <th>Description de la tâche</th>\n                                <th>Statut</th>\n                            </tr>\n                        </thead>\n                        <tbody id=\"table-taches\">\n                            <!-- Les tâches seront affichées ici -->\n                        </tbody>\n                    </table>\n                </div>\n                <div class=\"col-md-6\">\n                    <h2>Statistiques</h2>\n                    <canvas id=\"chart-statistiques\" width=\"400\" height=\"200\"></canvas>\n                    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n                    <script>\n                        let statutTaches = {\n                            \"En attente\": 0,\n                            \"En cours\": 0,\n                            \"Terminée\": 0\n                        };\n                        let taches = [];\n                        // Les données seront ajoutées ici\n                        const ctx = document.getElementById('chart-statistiques').getContext('2d');\n                        const chart = new Chart(ctx, {\n                            type: 'pie',\n                            data: {\n                                labels: Object.keys(statutTaches),\n                                datasets: [{\n                                    label: 'Statut des tâches',\n                                    data: Object.values(statutTaches),\n                                    backgroundColor: [\n                                        'rgba(255, 99, 132, 0.2)',\n                                        'rgba(54, 162, 235, 0.2)',\n                                        'rgba(255, 206, 86, 0.2)'\n                                    ],\n                                    borderColor: [\n                                        'rgba(255, 99, 132, 1)',\n                                        'rgba(54, 162, 235, 1)',\n                                        'rgba(255, 206, 86, 1)'\n                                    ],\n                                    borderWidth: 1\n                                }]\n                            }\n                        });\n                    </script>\n                </div>\n            </div>\n        </div>\n    </main>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        // Gestion des formulaires et des erreurs\n        const formTaches = document.getElementById('form-taches');\n        formTaches.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const nomTache = document.getElementById('nom-tache').value;\n            const descriptionTache = document.getElementById('description-tache').value;\n            // Envoi des données au serveur\n            fetch('/taches', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ nomTache, descriptionTache })\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                // Ajout de la tâche à la liste\n                const tableTaches = document.getElementById('table-taches');\n                const row = document.createElement('tr');\n                row.innerHTML = `\n                    <td>${nomTache}</td>\n                    <td>${descriptionTache}</td>\n                    <td>En attente</td>\n                `;\n                tableTaches.appendChild(row);\n                // Mise à jour des statistiques\n                const statutTaches = {\n                    \"En attente\": 1,\n                    \"En cours\": 0,\n                    \"Terminée\": 0\n                };\n                chart.data.labels = Object.keys(statutTaches);\n                chart.data.datasets[0].data = Object.values(statutTaches);\n                chart.update();\n            })\n            .catch((error) => console.error(error));\n        });\n    </script>\n</body>\n</html>\n", "timestamp": 1766328416.6709082}