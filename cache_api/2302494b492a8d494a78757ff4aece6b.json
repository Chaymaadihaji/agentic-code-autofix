{"nom_fichier": "app.py", "code": "from flask import Flask, render_template, request, make_response\nfrom collections import deque\n\napp = Flask(__name__)\n\n# Historique des calculs\nhistory = deque(maxlen=10)\n\n# Fonction pour calculer l'expression\ndef calculer(expression):\n    try:\n        result = eval(expression)\n        return str(result)\n    except Exception as e:\n        return str(e)\n\n# Fonction pour afficher l'historique\ndef afficher_historique():\n    return '\\n'.join(history)\n\n# Fonction pour effacer l'historique\ndef effacer_historique():\n    global history\n    history = deque(maxlen=10)\n\n# Route pour la page d'accueil\n@app.route('/')\ndef index():\n    return render_template('index.html')\n\n# Route pour le calcul\n@app.route('/calcul', methods=['POST'])\ndef calcul():\n    expression = request.form['expression']\n    result = calculer(expression)\n    history.append(expression + ' = ' + result)\n    return render_template('resultat.html', result=result, history=afficher_historique())\n\n# Route pour effacer l'historique\n@app.route('/effacer', methods=['POST'])\ndef effacer():\n    effacer_historique()\n    return render_template('index.html')\n\n# Route pour afficher l'historique\n@app.route('/historique')\ndef historique():\n    return render_template('historique.html', history=afficher_historique())\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766332715.349085}