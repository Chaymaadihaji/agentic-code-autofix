{"nom_fichier": "game.py", "code": "# game.py\nimport random\nfrom flask import Flask, render_template, request, jsonify\nimport json\n\napp = Flask(__name__)\n\n# Système de scores\nscores = {\n    \"joueur1\": {\"victoires\": 0, \"défaites\": 0},\n    \"joueur2\": {\"victoires\": 0, \"défaites\": 0}\n}\n\n# Historique des parties\nhistorique = []\n\n# Fonction de gestion des scores\ndef maj_scores(joueur, resultat):\n    if resultat == \"gagné\":\n        scores[joueur][\"victoires\"] += 1\n    elif resultat == \"perdu\":\n        scores[joueur][\"défaites\"] += 1\n\n# Fonction de jeu de pierre-papier-ciseaux\ndef jouer_pierre_papier_ciseaux(joueur1, joueur2):\n    options = [\"pierre\", \"papier\", \"ciseaux\"]\n    choix_joueur1 = random.choice(options)\n    choix_joueur2 = random.choice(options)\n    print(f\"Joueur 1 : {choix_joueur1}, Joueur 2 : {choix_joueur2}\")\n    if choix_joueur1 == choix_joueur2:\n        return \"égal\"\n    elif (choix_joueur1 == \"pierre\" and choix_joueur2 == \"ciseaux\") or \\\n         (choix_joueur1 == \"papier\" and choix_joueur2 == \"pierre\") or \\\n         (choix_joueur1 == \"ciseaux\" and choix_joueur2 == \"papier\"):\n        return \"gagné\"\n    else:\n        return \"perdu\"\n\n# Route pour afficher l'écran de jeu\n@app.route(\"/\")\ndef jeu():\n    return render_template(\"jeu.html\")\n\n# Route pour jouer la partie\n@app.route(\"/jouer\", methods=[\"POST\"])\ndef jouer():\n    joueur1 = request.form[\"joueur1\"]\n    joueur2 = request.form[\"joueur2\"]\n    resultat = jouer_pierre_papier_ciseaux(joueur1, joueur2)\n    maj_scores(joueur1, resultat)\n    maj_scores(joueur2, \"perdu\" if resultat == \"gagné\" else \"gagné\")\n    historique.append({\"joueur1\": joueur1, \"joueur2\": joueur2, \"resultat\": resultat})\n    return jsonify({\"resultat\": resultat, \"scores\": scores, \"historique\": historique})\n\n# Route pour afficher les scores et l'historique\n@app.route(\"/scores\")\ndef scores():\n    return render_template(\"scores.html\", scores=scores, historique=historique)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766493299.928351}