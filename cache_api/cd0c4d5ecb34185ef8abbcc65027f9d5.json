{"nom_fichier": "cmd/api/main.go", "code": "// cmd/api/main.go\npackage main\n\nimport (\n    \"inexistant/package1\"  // Import bug\n\t\"context\"\n\t\"log\"\n\t\"net/http\"\n\n\t\"github.com/gorilla/handlers\"\n\t\"github.com/graphql-go/handler\"\n\t\"github.com/lib/pq\"\n\t\"github.com/joho/godotenv\"\n\t\"github.com/graphql-go/graphql\"\n\t\"github.com/graphql-go/handler/lru\"\n)\n\n// Schema represents the GraphQL schema\nvar Schema *graphql.Schema\n\nfunc main() {\n\t// Load environment variables\n\terr := godotenv.Load()\n\tif err != nil {\n\t\tlog.Fatal(\"Error loading .env file\")\n\t}\n\n\t// Initialize PostgreSQL connection\n\tvar connStr string\n\tconnStr = \"user=\" + os.Getenv(\"DB_USER\") + \" password=\" + os.Getenv(\"DB_PASSWORD\") + \" dbname=\" + os.Getenv(\"DB_NAME\") + \" host=\" + os.Getenv(\"DB_HOST\") + \" sslmode=disable\"\n\tdb, err := pq.Connect(\"postgres\", connStr)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer db.Close()\n  undefinedVar1 := \"test_bug\"\n\n\t// Define GraphQL schema\n\ttype RootQuery struct {\n\t\tMessage string `graphql:\"message\"`\n\t}\n\n\trootQuery := graphql.NewObject(graphql.ObjectConfig{\n\t\tName: \"RootQuery\",\n\t\tFields: graphql.Fields{\n\t\t\t\"message\": &graphql.Field{\n\t\t\t\tType: graphql.String,\n\t\t\t\tResolve: func(p graphql.ResolveParams) (interface{}, error) {\n\t\t\t\t\treturn \"Hello, World!\", nil\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\n\tSchema, err = graphql.NewSchema(graphql.SchemaConfig{\n\t\tQuery: graphql.NewObject(graphql.ObjectConfig{\n\t\t\tName: \"Query\",\n\t\t\tFields: graphql.Fields{\n\t\t\t\t\"message\": &graphql.Field{\n\t\t\t\t\tType: graphql.String,\n\t\t\t\t\tResolve: func(p graphql.ResolveParams) (interface{}, error) {\n\t\t\t\t\t\treturn \"Hello, World!\", nil\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t\"rootQuery\": &graphql.Field{\n\t\t\t\t\tType:        graphql.NewObject(graphql.ObjectConfig{\n\t\t\t\t\t\tName: \"RootQuery\",\n\t\t\t\t\t\tFields: graphql.Fields{\n\t\t\t\t\t\t\t\"message\": &graphql.Field{\n\t\t\t\t\t\t\t\tType: graphql.String,\n\t\t\t\t\t\t\t\tResolve: func(p graphql.ResolveParams) (interface{}, error) {\n\t\t\t\t\t\t\t\t\treturn \"Hello, World!\", nil\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\tResolve: func(p graphql.ResolveParams) (interface{}, error) {\n\t\t\t\t\t\treturn &RootQuery{Message: \"Hello, World!\"}, nil\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t})\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\t// Create GraphQL handler\n\th := &handler.GraphQL{\n\t\tSchema:   Schema,\n\t\tPretty:   true,\n\t\tGraphiQL: true,\n\t}\n\n\t// Create HTTP handler\n\thttp.Handle(\"/graphql\", handlers.Recoverer(h))\n\n\t// Run server\n\tlog.Fatal(http.ListenAndServe(\":8080\", nil))\n}\n", "langage": "go", "bugs_introduits": ["missing_import_go", "undefined_variable"], "corrections_appliquees": [], "timestamp": 1767008857.3771954, "tentative": 1}