{"nom_fichier": "src/App.tsx", "code": "typescript\n// src/App.tsx\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport AppRouter from './routes/AppRouter';\nimport { store } from './store/configureStore';\n\nimport './styles/tailwind.css';\n\ninterface IError {\n  code: number;\n  message: string;\n}\n\ninterface IRessource {\n  id: number;\n  titre: string;\n  contenu: string;\n}\n\ninterface IResponse {\n  data: IRessource[];\n  meta: IMeta;\n}\n\ninterface IMeta {\n  page: number;\n  per_page: number;\n  total: number;\n  links: Links;\n}\n\ninterface Links {\n  first: string;\n  last: string;\n  next: string;\n  prev: string;\n}\n\nconst App = () => {\n  const [resources, setResources] = React.useState<IRessource[]>([]);\n  const [load, setLoad] = React.useState(false);\n  const [hasPrev, setHasPrev] = React.useState(false);\n  const [hasNext, setHasNext] = React.useState(false);\n  const [page, setPage] = React.useState(1);\n  const [perPage, setPerPage] = React.useState(10);\n  const [total, setTotal] = React.useState(0);\n  const [error, setError] = React.useState<IError | null>(null);\n\n  const getResource = React.useCallback(async (page: number, perPage: number) => {\n    try {\n      setLoad(true);\n      setError(null);\n      const response: IResponse = await fetch(`https://api.example.com/resources?page=${page}&per_page=${perPage}`)\n        .then(response => response.json())\n        .catch((e: any) => {\n          setError({ code: e.status, message: e.statusText });\n          throw e;\n        });\n\n      setResources(response.data);\n      setTotal(response.meta.total);\n      setPerPage(perPage);\n      setPage(page);\n      setLoad(false);\n      setHasPrev(response.meta.links.prev !== null);\n      setHasNext(response.meta.links.next !== null);\n    } catch {\n      setError({ code: 500, message: 'Erreur serveur' });\n    }\n  }, []);\n\n  const handlePrev = () => {\n    if (hasPrev) getResource(page - 1, perPage);\n  };\n\n  const handleNext = () => {\n    if (hasNext) getResource(page + 1, perPage);\n  };\n\n  const loadResources = React.useCallback(() => getResource(page, perPage), [page, perPage, getResource]);\n\n  React.useEffect(() => {\n    loadResources();\n  }, [loadResources]);\n\n  const handleRefresh = () => {\n    loadResources();\n  };\n\n  const [refreshState, setRefreshState] = React.useState(false);\n\n  const refresh = () => {\n    setRefreshState(true);\n    loadResources();\n    setTimeout(() => setRefreshState(false), 2000);\n  };\n\n  const handleDelete = (id: number) => {\n    // Gestion de la suppression de l'entité\n    getResource(page, perPage);\n  };\n\n  const handleEdit = (id: number) => {\n    // Gestion de l'édition de l'entité\n    getResource(page, perPage);\n  };\n\n  const refreshData = React.useCallback(() => {\n    getResource(page, perPage);\n  }, [page, perPage, getResource]);\n\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <main className=\"container mx-auto p-4 mt-10\">\n          <h1 className=\"text-3xl font-bold my-4\">Liste des ressources</h1>\n          <div className=\"my-4\">{error && <p>Error code: {error.code} - {error.message}</p>}</div>\n          <div className=\"flex justify-between\">\n            <button\n              onClick={handleRefresh}\n              className={({ loading, active }) => loading ? 'bg-gray-700 text-white cursor-not-allowed' : active ? 'bg-blue-500 hover:bg-blue-700 text-white' : 'bg-gray-100 hover:bg-gray-200 text-gray-900'}\n            >\n              {refreshState ? 'Chargement...' : 'Recharger'}\n            </button>\n            <div>\n              <p>page {page}</p>\n              <p>{hasPrev ? <a onClick={handlePrev}>Précédante</a> : <span>Précédante</span>}</p>\n              <p>{hasNext ? <a onClick={handleNext}>Suivante</a> : <span>Suivante</span>}</p>\n            </div>\n          </div>\n          <ul>\n            {resources.map(r => (\n              <li key={r.id}>\n                {r.titre} - {r.contenu}\n              </li>\n            ))}\n          </ul>\n        </main>\n      </BrowserRouter>\n    </Provider>\n  );\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n", "langage": "typescript", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767106267.3254504, "tentative": 4}