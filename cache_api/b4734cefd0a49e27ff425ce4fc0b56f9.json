{"nom_fichier": "main.py", "code": "# main.py\n\nimport json\nimport random\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Données de jeu\nscores = {\"joueur\": 0, \"ordinateur\": 0}\nhistorique = []\nrègles = {\"pierre\": \"feuille\", \"papier\": \"ciseaux\", \"ciseaux\": \"pierre\"}\n\n# Chargement des données de jeu depuis un fichier JSON\nwith open(\"scores.json\", \"r\") as f:\n    scores = json.load(f)\n\n# Fonction de jeu de pierre-papier-ciseaux\ndef jouer():\n    joueur = request.form[\"joueur\"]\n    ordinateur = random.choice([\"pierre\", \"papier\", \"ciseaux\"])\n    print(\"Joueur:\", joueur)\n    print(\"Ordinateur:\", ordinateur)\n    \n    # Gestion des règles\n    if joueur == ordinateur:\n        print(\"Egalité\")\n    elif (joueur == \"pierre\" and ordinateur == \"ciseaux\") or (joueur == \"papier\" and ordinateur == \"pierre\") or (joueur == \"ciseaux\" and ordinateur == \"papier\"):\n        print(\"Joueur gagne\")\n        scores[\"joueur\"] += 1\n    else:\n        print(\"Ordinateur gagne\")\n        scores[\"ordinateur\"] += 1\n    \n    # Ajout à l'historique\n    historique.append({\"joueur\": joueur, \"ordinateur\": ordinateur, \"resultat\": scores})\n    \n    # Sauvegarde des données de jeu\n    with open(\"scores.json\", \"w\") as f:\n        json.dump(scores, f)\n\n# Route pour le formulaire de jeu\n@app.route(\"/\", methods=[\"GET\", \"POST\"])\ndef index():\n    if request.method == \"POST\":\n        jouer()\n    return render_template(\"index.html\", scores=scores, historique=historique)\n\n# Route pour afficher les scores\n@app.route(\"/scores\")\ndef scores():\n    return render_template(\"scores.html\", scores=scores)\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766493287.7515903}