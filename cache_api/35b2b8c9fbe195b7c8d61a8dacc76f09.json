{"nom_fichier": "Dockerfile", "code": "Dockerfile\n# Dockerfile pour une application web Django avec interface admin, authentification utilisateurs, base de données PostgreSQL, API REST et déploiement Docker\n\n# Déclarer l'image de base\nFROM python:3.9-slim\n\n# Changer le repertoire de travail\nWORKDIR /app\n\n# Télécharger les dependances\nCOPY requirements.txt .\n\n# Installer les dependances\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copier le code de l'application\nCOPY . .\n\n# Exposer le port\nEXPOSE 8000 5432\n\n# Configuration de la base de données PostgreSQL\nENV DATABASE_URL=postgres://postgres:postgres@db:5432/mydatabase\n\n# Configuration de l'application Django\nENV DJANGO_SETTINGS Module=mysite.settings.dev\n\n# Définition de l'entrée de l'application\nCMD [\"./wait-for-it.sh\", \"db:5432\", \"--\", \"python\", \"manage.py\", \"runserver\", \"0.0.0.0:8000\"]\n\n# Créer le fichier de configurations pour PostgreSQL\nRUN echo \"database_password = postgres\" >> /etc/postgresql-common/configfile.conf\n\n# Créer un répertoire pour la base de données\nRUN mkdir -p /var/lib/postgresql/data\n\n# Créer un utilisateur et une base de données pour PostgreSQL\nRUN su - postgres -c \"echo postgres » /etc/postgresql/common/pg_hba.conf\"\nRUN su - postgres -c \"echo host all all 0.0.0.0/0 trust » /etc/postgresql/common/pg_hba.conf\"\nRUN su - postgres -c \"echo postgres » /var/lib/postgresql/data/postgresql.conf\"\n\n# Initialisation de la base de données\nENV INIT_DB=1\n\n# Ajouter une commande pour configurer la base de données\nCMD [\"./configure_db.sh\"]\n\n# Créer le fichier d'initialisation de la base de données\nRUN bash -c \"\n    if [ -z \"$INIT_DB\" ]; then\n        echo '' >> /etc/init.d/postgresql\n    fi\"\n", "bugs_introduits": [], "timestamp": 1767002557.2242289}