{"nom_fichier": "ui.py", "code": "from flask import Flask, render_template, request\nimport random\n\napp = Flask(__name__)\n\n# Mots à deviner\nmots = [\"chien\", \"chat\", \"oiseau\", \"renard\", \"singe\"]\n\n# État du jeu\netat_jeu = {\n    \"mot\": \"\",\n    \"lettres\": [],\n    \"essais\": 6,\n    \"score\": 0\n}\n\n# Fonction pour générer le mot au hasard\ndef generer_mot_aleatoire():\n    return random.choice(mots)\n\n# Fonction pour afficher le pendu\ndef afficher_pendu(lettres):\n    pendu = \"\"\n    for lettre in etat_jeu[\"mot\"]:\n        if lettre in lettres:\n            pendu += lettre + \" \"\n        else:\n            pendu += \"_ \"\n    return pendu\n\n# Fonction pour vérifier si le mot a été deviné\ndef est_devine(mot, lettres):\n    return all(char in lettres for char in mot)\n\n# Route pour afficher la page de jeu\n@app.route(\"/\")\ndef jeu():\n    global etat_jeu\n    etat_jeu[\"mot\"] = generer_mot_aleatoire()\n    etat_jeu[\"lettres\"] = []\n    etat_jeu[\"essais\"] = 6\n    etat_jeu[\"score\"] = 0\n    return render_template(\"jeu.html\", pendu=afficher_pendu(etat_jeu[\"lettres\"]))\n\n# Route pour traiter la saisie de lettres\n@app.route(\"/saisie\", methods=[\"POST\"])\ndef saisie():\n    global etat_jeu\n    lettre = request.form[\"lettre\"]\n    if lettre in etat_jeu[\"lettres\"]:\n        return render_template(\"erreur.html\", message=\"Vous avez déjà saisi cette lettre !\")\n    etat_jeu[\"lettres\"].append(lettre)\n    pendu = afficher_pendu(etat_jeu[\"lettres\"])\n    if est_devine(etat_jeu[\"mot\"], \"\".join(etat_jeu[\"lettres\"])):\n        etat_jeu[\"score\"] += 1\n        return render_template(\"gagné.html\", message=\"Vous avez gagné !\")\n    elif etat_jeu[\"essais\"] == 0:\n        return render_template(\"perdu.html\", message=\"Vous avez perdu !\")\n    else:\n        etat_jeu[\"essais\"] -= 1\n        return render_template(\"jeu.html\", pendu=pendu, essais=etat_jeu[\"essais\"])\n\n# Route pour afficher la page de fin de jeu\n@app.route(\"/fin\")\ndef fin():\n    return render_template(\"fin.html\", score=etat_jeu[\"score\"])\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830474.896857}