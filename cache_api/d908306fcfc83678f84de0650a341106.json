{"nom_fichier": "models.py", "code": "# models.py\nfrom flask import Flask, render_template, request, jsonify\nimport json\n\napp = Flask(__name__)\n\n# Données en mémoire\nhistorique = []\ncalculs = {}\n\n# Fonction pour calculer l'expression\ndef calcul(expression):\n    try:\n        return eval(expression)\n    except Exception as e:\n        return str(e)\n\n# Fonction pour effacer l'historique\ndef effacer_historique():\n    global historique\n    historique = []\n\n# Route pour afficher la page principale\n@app.route('/', methods=['GET'])\ndef index():\n    return render_template('index.html')\n\n# Route pour traiter les calculs\n@app.route('/calcul', methods=['POST'])\ndef traitement_calcul():\n    global calculs\n    expression = request.form['expression']\n    calcul = calcul(expression)\n    calculs[expression] = calcul\n    historique.append(expression)\n    if len(historique) > 10:\n        historique.pop(0)\n    return jsonify({'calcul': calcul, 'historique': historique})\n\n# Route pour afficher l'historique\n@app.route('/historique', methods=['GET'])\ndef afficher_historique():\n    global historique\n    return jsonify({'historique': historique})\n\n# Route pour effacer l'historique\n@app.route('/effacer', methods=['GET'])\ndef effacer():\n    global historique\n    effacer_historique()\n    return jsonify({'message': 'Historique effacé'})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766332725.6941655}