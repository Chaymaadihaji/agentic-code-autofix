{"nom_fichier": "main.py", "code": "import os\nfrom flask import Flask, render_template, request, jsonify\nfrom flask_bootstrap import Bootstrap\nimport json\n\napp = Flask(__name__)\nBootstrap(app)\n\n# Données pour le dashboard\ntasks = [\n    {\"id\": 1, \"name\": \"Tâche 1\", \"état\": \"En cours\"},\n    {\"id\": 2, \"name\": \"Tâche 2\", \"état\": \"Terminée\"},\n    {\"id\": 3, \"name\": \"Tâche 3\", \"état\": \"En cours\"}\n]\n\n# Fonction pour générer des données aléatoires\ndef generate_data():\n    for i in range(10):\n        tasks.append({\n            \"id\": i+4,\n            \"name\": f\"Tâche {i+4}\",\n            \"état\": \"En cours\" if i % 2 == 0 else \"Terminée\"\n        })\n\n# Calcul des statistiques\ndef calc_statistiques(tasks):\n    total = len(tasks)\n    en_cours = sum(1 for task in tasks if task[\"état\"] == \"En cours\")\n    terminée = total - en_cours\n    return total, en_cours, terminée\n\n# API pour les données en temps réel\n@app.route('/api/tasks', methods=['GET'])\ndef get_tasks():\n    return jsonify(tasks)\n\n# API pour les statistiques\n@app.route('/api/statistiques', methods=['GET'])\ndef get_statistiques():\n    total, en_cours, terminée = calc_statistiques(tasks)\n    return jsonify({\n        \"total\": total,\n        \"en_cours\": en_cours,\n        \"terminée\": terminée\n    })\n\n# Route pour la page d'accueil\n@app.route('/', methods=['GET'])\ndef index():\n    total, en_cours, terminée = calc_statistiques(tasks)\n    return render_template('index.html', tasks=tasks, total=total, en_cours=en_cours, terminée=terminée)\n\n# Fonction pour mettre à jour la liste des tâches\n@app.route('/update_tasks', methods=['POST'])\ndef update_tasks():\n    id = request.form['id']\n    état = request.form['état']\n    for task in tasks:\n        if task['id'] == int(id):\n            task['état'] = état\n    return jsonify({\"message\": \"Tâche mise à jour avec succès\"})\n\n# Fonction pour ajouter une nouvelle tâche\n@app.route('/add_task', methods=['POST'])\ndef add_task():\n    name = request.form['name']\n    tasks.append({\n        \"id\": len(tasks) + 1,\n        \"name\": name,\n        \"état\": \"En cours\"\n    })\n    return jsonify({\"message\": \"Tâche ajoutée avec succès\"})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n\n# Template HTML\nfrom flask import render_template\n@app.context_processor\ndef inject_template():\n    return dict(total=0, en_cours=0, terminée=0)\n\n@app.route('/template')\ndef template():\n    return render_template('template.html', total=0, en_cours=0, terminée=0)\n\n# Fichier de configuration pour Bootstrap\nwith open('static/config.json', 'w') as f:\n    json.dump({\n        \"version\": \"1.0\",\n        \"bootstrap\": \"5.1.3\",\n        \"font_awesome\": \"5.15.3\"\n    }, f)\n", "timestamp": 1766328098.6100538}