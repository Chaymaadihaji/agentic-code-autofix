{"nom_fichier": "dashboard.py", "code": "import os\nfrom flask import Flask, render_template, request, jsonify\nimport json\nfrom datetime import datetime, timedelta\n\napp = Flask(__name__)\n\n# Génération de données pour le dashboard\nwith open('data.json', 'w') as f:\n    data = {\n        \"tasks\": [\n            {\"id\": 1, \"title\": \"Tâche 1\", \"description\": \"Description de la tâche 1\", \"status\": \"en cours\"},\n            {\"id\": 2, \"title\": \"Tâche 2\", \"description\": \"Description de la tâche 2\", \"status\": \"terminée\"},\n            {\"id\": 3, \"title\": \"Tâche 3\", \"description\": \"Description de la tâche 3\", \"status\": \"en cours\"},\n        ]\n    }\n    json.dump(data, f)\n\n# Calcul des statistiques/métriques\ndef calculate_stats(tasks):\n    stats = {\n        \"total\": len(tasks),\n        \"en_cours\": len([t for t in tasks if t['status'] == \"en cours\"]),\n        \"terminées\": len([t for t in tasks if t['status'] == \"terminée\"]),\n        \"en_attente\": len([t for t in tasks if t['status'] == \"en attente\"]),\n    }\n    return stats\n\n# API pour les données en temps réel\n@app.route('/api/tasks', methods=['GET'])\ndef get_tasks():\n    with open('data.json', 'r') as f:\n        data = json.load(f)\n    return jsonify(data['tasks'])\n\n# Gestion des erreurs de base\n@app.errorhandler(404)\ndef not_found(e):\n    return 'Page not found', 404\n\n# Route pour la page d'accueil\n@app.route('/')\ndef index():\n    with open('data.json', 'r') as f:\n        data = json.load(f)\n    stats = calculate_stats(data['tasks'])\n    return render_template('index.html', tasks=data['tasks'], stats=stats)\n\n# Route pour la création de tâches\n@app.route('/create-task', methods=['POST'])\ndef create_task():\n    with open('data.json', 'r') as f:\n        data = json.load(f)\n    new_task = {\n        \"id\": len(data['tasks']) + 1,\n        \"title\": request.form['title'],\n        \"description\": request.form['description'],\n        \"status\": request.form['status'],\n    }\n    data['tasks'].append(new_task)\n    with open('data.json', 'w') as f:\n        json.dump(data, f)\n    return jsonify({'message': 'Tâche créée avec succès'})\n\n# Route pour la mise à jour de tâches\n@app.route('/update-task', methods=['POST'])\ndef update_task():\n    with open('data.json', 'r') as f:\n        data = json.load(f)\n    task_id = request.form['id']\n    task = next((t for t in data['tasks'] if t['id'] == task_id), None)\n    if task:\n        task['title'] = request.form['title']\n        task['description'] = request.form['description']\n        task['status'] = request.form['status']\n        with open('data.json', 'w') as f:\n            json.dump(data, f)\n        return jsonify({'message': 'Tâche mise à jour avec succès'})\n    return jsonify({'message': 'Tâche non trouvée'}), 404\n\n# Route pour la suppression de tâches\n@app.route('/delete-task', methods=['POST'])\ndef delete_task():\n    with open('data.json', 'r') as f:\n        data = json.load(f)\n    task_id = request.form['id']\n    data['tasks'] = [t for t in data['tasks'] if t['id'] != task_id]\n    with open('data.json', 'w') as f:\n        json.dump(data, f)\n    return jsonify({'message': 'Tâche supprimée avec succès'})\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766329957.0892386}