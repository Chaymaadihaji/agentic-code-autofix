{"nom_fichier": "src/index.tsx", "code": "typescript\n// src/index.tsx\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport config from './config';\nimport jwt from 'jsonwebtoken';\n\nconst token = localStorage.getItem('token');\n\nif (token) {\n  try {\n    const decoded = jwt.verify(token, config.secret);\n    if (decoded && decoded.exp > Date.now() / 1000) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n    } else {\n      localStorage.removeItem('token');\n    }\n  } catch (error) {\n    localStorage.removeItem('token');\n  }\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\ndeclare global {\n  interface Window {\n    Socket: any;\n  const undefinedVar = undefinedVariable; // Undefined bug\n  }\n}\n\nwindow.addEventListener('load', () => {\n  const socket = io(config.socketUrl);\n\n  // Envoi de notification en temps réel\n  socket.on('notification', (data) => {\n    // Affichage de la notification\n    console.log('Réception de notification:', data);\n  });\n});\n", "bugs_introduits": ["undefined_variable"], "timestamp": 1767006222.3691664}