{"nom_fichier": "app.py", "code": "# app.py\nimport json\nimport random\nfrom flask import Flask, render_template, jsonify\nfrom flask_bootstrap import Bootstrap\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nimport pandas as pd\n\napp = Flask(__name__)\nBootstrap(app)\n\n# Fichier JSON contenant les données météo\nwith open('donnees_meteo.json') as f:\n    donnees_meteo = json.load(f)\n\n# Calcul des statistiques/métriques\ndef calcul_statistiques(donnees):\n    temperature_moyenne = sum(donnees['temperature']) / len(donnees['temperature'])\n    pluie_moyenne = sum(donnees['pluie']) / len(donnees['pluie'])\n    return temperature_moyenne, pluie_moyenne\n\n# Génération de données pour le dashboard\ndonnees_dashboard = {\n    'temperature': [random.randint(15, 30) for _ in range(24)],\n    'pluie': [random.random() for _ in range(24)],\n}\n\n# Calcul des statistiques/métriques\ntemperature_moyenne, pluie_moyenne = calcul_statistiques(donnees_dashboard)\n\n# API pour les données en temps réel\n@app.route('/donnees')\ndef donnees_api():\n    return jsonify({'temperature': donnees_dashboard['temperature'], 'pluie': donnees_dashboard['pluie']})\n\n# Route pour la page de dashboard\n@app.route('/')\ndef index():\n    return render_template('index.html', temperature_moyenne=temperature_moyenne, pluie_moyenne=pluie_moyenne)\n\n# Route pour les graphiques\n@app.route('/graphiques')\ndef graphiques():\n    plt.figure(figsize=(10, 6))\n    sns.lineplot(data=pd.DataFrame({'temps': range(24), 'temperature': donnees_dashboard['temperature']}))\n    plt.xlabel('Temps')\n    plt.ylabel('Température')\n    plt.title('Évolution de la température')\n    plt.savefig('static/graphiques.png')\n    return 'Graphiques générés'\n\n# Route pour les cartes\n@app.route('/cartes')\ndef cartes():\n    return render_template('cartes.html')\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n\n# index.html\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard météo</title>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css\">\n</head>\n<body>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <a class=\"navbar-brand\" href=\"#\">Dashboard météo</a>\n    </nav>\n    <div class=\"container\">\n        <h1>État météo actuel</h1>\n        <p>Température moyenne : {{ temperature_moyenne }}°C</p>\n        <p>Pluie moyenne : {{ pluie_moyenne }}%</p>\n    </div>\n    <img src=\"{{ url_for('static', filename='graphiques.png') }}\" alt=\"Graphiques\">\n</body>\n</html>\n\n# cartes.html\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cartes météo</title>\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css\">\n</head>\n<body>\n    <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n        <a class=\"navbar-brand\" href=\"#\">Cartes météo</a>\n    </nav>\n    <div class=\"container\">\n        <h1>Cartes météo</h1>\n        <p>Cliquez sur les cartes pour afficher les informations détaillées</p>\n    </div>\n</body>\n</html>\n", "timestamp": 1766829844.0525775}