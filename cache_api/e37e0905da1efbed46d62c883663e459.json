{"nom_fichier": "src/index.tsx", "code": "typescript\n/**\n * src/index.tsx\n * Application React qui récupère des données de l'API JSONPlaceholder et les affiche dans un tableau avec pagination\n */\n\nimport React, { useState, useEffect } from 'react';\nimport './styles.css';\n\nfunction App() {\n  // Etat du composant\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [postsPerPage] = useState(10);\n\n  // Fichier JSONPlaceholder API\n  const apiUrl = 'https://jsonplaceholder.typicode.com/posts';\n\n  // Fonction pour afficher les données\n  const displayData = (data: any) => {\n    if (data === null || data.length === 0) {\n      return <div>Aucun résultat trouvé</div>;\n    }\n\n    return (\n      data\n        .slice((currentPage - 1) * postsPerPage, currentPage * postsPerPage)\n        .map((item: any) => {\n          return (\n            <div key={item.id} className=\"card\">\n              <h2>{item.title}</h2>\n              <p>{item.body}</p>\n            </div>\n          );\n        })\n    );\n  };\n\n  // Fonction pour faire les requêtes API\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(apiUrl);\n        const data = await response.json();\n\n        setData(data);\n        setLoading(false);\n      } catch (error) {\n        setError(error.message);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n\n    // Effect for pagination\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [currentPage]);\n\n  // Handle scroll for pagination\n  const handleScroll = () => {\n    const { scrollHeight, scrollTop, clientHeight } = document.documentElement;\n\n    if (\n      scrollHeight === scrollTop + clientHeight &&\n      currentPage * postsPerPage <= data.length - 1\n    ) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  // Message d'erreur\n  if (loading) {\n    return <p>Chargement...</p>;\n  }\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  // Retirer les résultats\n  return (\n    <div className=\"container\">\n      <h1>Tableau des posts</h1>\n      <button onClick={() => setCurrentPage(1)}>Première page</button>\n      <button onClick={() => setCurrentPage(currentPage + 1)}>Préc</button>\n      <button onClick={() => setCurrentPage(currentPage - 1)}>Suivant</button>\n      <table>\n        <thead>\n          <tr>\n            <th>Titre</th>\n            <th>Corps</th>\n          </tr>\n        </thead>\n        <tbody>{displayData(data)}</tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default App;\n", "langage": "typescript", "bugs_introduits": [], "corrections_appliquees": [], "timestamp": 1767306611.9687598, "tentative": 4}