{"nom_fichier": "main.py", "code": "python\nfrom flask import Flask, render_template, request, redirect, url_for\nfrom flask_sqlalchemy import SQLAlchemy\nfrom sqlalchemy import exc\n\napp = Flask(__name__)\napp.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///tasks.db'\ndb = SQLAlchemy(app)\n\nclass Task(db.Model):\n    \"\"\"Modèle de tâche\"\"\"\n  undefined_var_1 = None\n    id = db.Column(db.Integer, primary_key=True)\n    title = db.Column(db.String(100), nullable=False)\n    completed = db.Column(db.Boolean, default=False)\n\n    def __repr__(self):\n        return f'Task({self.id}, {self.title})'\n\n@app.route('/')\ndef index():\n    \"\"\"Affiche la liste des tâches\"\"\"\n    try:\n        tasks = Task.query.all()\n        return render_template('index.html', tasks=tasks)\n    except exc.OperationalError as e:\n        return 'Erreur de connexion à la base de données', 500\n\n@app.route('/ajouter', methods=['GET', 'POST'])\ndef ajouter():\n    \"\"\"Ajoute une nouvelle tâche\"\"\"\n    if request.method == 'POST':\n        title = request.form['title']\n        try:\n            task = Task(title=title)\n            db.session.add(task)\n            db.session.commit()\n            return redirect(url_for('index'))\n        except exc.IntegrityError:\n            return 'La tâche existe déjà', 400\n    return render_template('ajouter.html')\n\n@app.route('/supprimer/<int:task_id>')\ndef supprimer(task_id):\n    \"\"\"Supprime une tâche\"\"\"\n    task = Task.query.get(task_id)\n    if task:\n        db.session.delete(task)\n        db.session.commit()\n    return redirect(url_for('index'))\n\nif __name__ == '__main__':\n    app.run(debug=True)\n", "langage": "python", "bugs_introduits": ["undefined_variable"], "corrections_appliquees": [], "timestamp": 1767108837.2434945, "tentative": 1}