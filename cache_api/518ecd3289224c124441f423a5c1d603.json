{"nom_fichier": "ui.py", "code": "# ui.py\n\nfrom flask import Flask, render_template, request\nimport random\nimport json\n\napp = Flask(__name__)\n\n# Structure de données pour les scores et historique\nscores = {\"joueur\": 0, \"ordinateur\": 0}\nhistorique = []\n\n# Chemin du fichier JSON pour les scores et historique\nfichier_scores = \"scores.json\"\n\n# Fonction pour gérer les scores\ndef sauvegarder_scores():\n    with open(fichier_scores, \"w\") as fichier:\n        json.dump(scores, fichier)\n\ndef charger_scores():\n    try:\n        with open(fichier_scores, \"r\") as fichier:\n            return json.load(fichier)\n    except FileNotFoundError:\n        return {\"joueur\": 0, \"ordinateur\": 0}\n\n# Fonction pour jouer au jeu\ndef jouer():\n    choix_user = request.form[\"choix\"]\n    choix_ordinateur = random.choice([\"pierre\", \"papier\", \"ciseaux\"])\n\n    if choix_user == choix_ordinateur:\n        return \"Egalité\"\n    elif (choix_user == \"pierre\" and choix_ordinateur == \"ciseaux\") or \\\n         (choix_user == \"papier\" and choix_ordinateur == \"pierre\") or \\\n         (choix_user == \"ciseaux\" and choix_ordinateur == \"papier\"):\n        scores[\"joueur\"] += 1\n        return \"Gagné\"\n    else:\n        scores[\"ordinateur\"] += 1\n        return \"Perdu\"\n\n# Route pour afficher l'écran de jeu\n@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\")\n\n# Route pour jouer au jeu\n@app.route(\"/jouer\", methods=[\"POST\"])\ndef jouer_route():\n    resultat = jouer()\n    historique.append({\"user\": request.form[\"choix\"], \"ordinateur\": random.choice([\"pierre\", \"papier\", \"ciseaux\"]), \"resultat\": resultat})\n    sauvegarder_scores()\n    return render_template(\"resultat.html\", resultat=resultat, historique=historique)\n\n# Route pour afficher l'historique des parties\n@app.route(\"/historique\")\ndef historique_route():\n    global historique\n    historique = charger_scores()[\"historique\"]\n    return render_template(\"historique.html\", historique=historique)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766493328.9510684}