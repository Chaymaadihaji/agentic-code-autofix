{"nom_fichier": "player.py", "code": "# player.py\n\nimport random\nimport json\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Fichier de mots\nMOTS = \"mots.json\"\n\n# Fonction de génération de mots au hasard\ndef generate_word():\n    with open(MOTS, \"r\") as fichier:\n        mots = json.load(fichier)\n    return random.choice(mots)\n\n# Fonction de comptage de tentatives\ntentatives = 0\n\n# Fonction de gestion de l'état du jeu\netat = {\n    \"mot\": generate_word(),\n    \"tentatives\": 0,\n    \"vainqueur\": False\n}\n\n# Route pour afficher le formulaire\n@app.route(\"/\", methods=[\"GET\", \"POST\"])\ndef index():\n    global tentatives, etat\n    if request.method == \"POST\":\n        lettre = request.form[\"lettre\"]\n        if lettre in etat[\"mot\"]:\n            etat[\"mot\"] = list(etat[\"mot\"])\n            for i, l in enumerate(etat[\"mot\"]):\n                if l == lettre:\n                    etat[\"mot\"][i] = lettre.upper()\n                    etat[\"mot\"] = \"\".join(etat[\"mot\"])\n        else:\n            tentatives += 1\n            etat[\"tentatives\"] = tentatives\n        if \"_\" not in etat[\"mot\"]:\n            etat[\"vainqueur\"] = True\n    return render_template(\"index.html\", etat=etat)\n\n# Route pour afficher le score\n@app.route(\"/score\")\ndef score():\n    return render_template(\"score.html\", etat=etat)\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766861719.6142128}