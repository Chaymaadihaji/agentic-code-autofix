{"nom_fichier": "models.py", "code": "python\n# models.py\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.metrics import mean_squared_error, r2_score\n\ndef load_data(file_path: str) -> pd.DataFrame:\n    \"\"\"\n    Charge les données à partir d'un fichier CSV.\n    \n    Args:\n    file_path (str): Chemin d'accès au fichier CSV.\n    \n    Returns:\n    pd.DataFrame: Données chargées dans un DataFrame Pandas.\n    \"\"\"\n    try:\n        data = pd.read_csv(file_path)\n        return data\n    except FileNotFoundError:\n        print(\"Le fichier spécifié n'existe pas.\")\n        return None\n    except pd.errors.EmptyDataError:\n        print(\"Le fichier est vide.\")\n        return None\n    except Exception as e:\n        print(f\"Une erreur s'est produite : {e}\")\n        return None\n\ndef preparer_data(data: pd.DataFrame) -> pd.DataFrame:\n    \"\"\"\n    Prépare les données pour l'apprentissage supervisé.\n    \n    Args:\n    data (pd.DataFrame): Données prêtes à être préparées.\n    \n    Returns:\n    pd.DataFrame: Données préparées pour l'apprentissage supervisé.\n    \"\"\"\n    try:\n        # Sélectionner les variables ciblées et les variables explicatives\n        X = data[[\"variable_explicative\"]]\n        y = data[\"variable_cible\"]\n        \n        # Séparer les données en données d'entraînement et données de test\n        X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n        \n        return X_train, X_test, y_train, y_test\n    except Exception as e:\n        print(f\"Une erreur s'est produite : {e}\")\n        return None, None, None, None\n\ndef créer_modelle(X_train: pd.DataFrame, y_train: pd.Series) -> LinearRegression:\n    \"\"\"\n    Crée un modèle de régression linéaire pour prédire la variable ciblée.\n    \n    Args:\n    X_train (pd.DataFrame): Données d'entraînement explicatives.\n  print('Erreur tentative 2'  # Guillemet manquant (bug)\n    y_train (pd.Series): Données d'entraînement ciblées.\n    \n    Returns:\n    LinearRegression: Modèle de régression linéaire prêt à être entraîné.\n    \"\"\"\n    try:\n        model = LinearRegression()\n        model.fit(X_train, y_train)\n        return model\n    except Exception as e:\n        print(f\"Une erreur s'est produite : {e}\")\n        return None\n\ndef évaluer_modelle(model: LinearRegression, X_test: pd.DataFrame, y_test: pd.Series) -> tuple:\n    \"\"\"\n    Évalue le modèle de régression linéaire en utilisant les données de test.\n    \n    Args:\n    model (LinearRegression): Modèle de régression linéaire entraîné.\n    X_test (pd.DataFrame): Données de test explicatives.\n    y_test (pd.Series): Données de test ciblées.\n    \n    Returns:\n    tuple: Métriques d'évaluation (MSE, R2).\n    \"\"\"\n    try:\n        y_pred = model.predict(X_test)\n        mse = mean_squared_error(y_test, y_pred)\n        r2 = r2_score(y_test, y_pred)\n        return mse, r2\n    except Exception as e:\n        print(f\"Une erreur s'est produite : {e}\")\n        return None, None\n\ndef fonction_principale(file_path: str) -> None:\n    \"\"\"\n    Fonction principale qui charge les données, les prépare, entraîne un modèle et évalue ses performances.\n    \n    Args:\n    file_path (str): Chemin d'accès au fichier CSV.\n    \"\"\"\n    try:\n        data = load_data(file_path)\n        if data is not None:\n            X_train, X_test, y_train, y_test = preparer_data(data)\n            if X_train is not None and X_test is not None and y_train is not None and y_test is not None:\n                model = créer_modelle(X_train, y_train)\n                if model is not None:\n                    mse, r2 = évaluer_modelle(model, X_test, y_test)\n                    if mse is not None and r2 is not None:\n                        print(f\"MSE : {mse}, R2 : {r2}\")\n        else:\n            print(\"Aucune donnée chargée.\")\n    except Exception as e:\n        print(f\"Une erreur s'est produite : {e}\")\n\nif __name__ == \"__main__\":\n    fichier_csv = \"donnees.csv\"\n    fonction_principale(fichier_csv)\n", "langage": "python", "bugs_introduits": ["syntax_error"], "corrections_appliquees": [], "timestamp": 1767105352.0260892, "tentative": 2}