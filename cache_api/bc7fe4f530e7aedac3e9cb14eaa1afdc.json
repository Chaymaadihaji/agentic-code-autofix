{"nom_fichier": "dashboard.py", "code": "# dashboard.py\n\nimport sqlite3\nfrom flask import Flask, render_template, request, jsonify\nfrom flask_bootstrap import Bootstrap\nfrom datetime import datetime, timedelta\n\napp = Flask(__name__)\nBootstrap(app)\n\n# Connexion à la base de données\nconn = sqlite3.connect('taches.db')\ncursor = conn.cursor()\n\n# Créer la table des tâches s'il n'existe pas\ncursor.execute('''\n    CREATE TABLE IF NOT EXISTS taches (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        nom TEXT NOT NULL,\n        description TEXT,\n        cree_le DATE DEFAULT CURRENT_DATE,\n        termine_le DATE\n    )\n''')\n\n# Génération de données pour le dashboard\ntaches = [\n    {'nom': 'Tâche 1', 'description': 'Description de la tâche 1'},\n    {'nom': 'Tâche 2', 'description': 'Description de la tâche 2'},\n    {'nom': 'Tâche 3', 'description': 'Description de la tâche 3'}\n]\n\n# Calcul des statistiques/métriques\nstatistiques = {\n    'total_taches': len(taches),\n    'taches_terminees': 0,\n    'taches_en_cours': 0,\n    'taches_a_comecer': 0\n}\n\nfor tache in taches:\n    if tache['termine_le']:\n        statistiques['taches_terminees'] += 1\n    elif tache['cree_le'] + timedelta(days=7) > datetime.now():\n        statistiques['taches_en_cours'] += 1\n    else:\n        statistiques['taches_a_comecer'] += 1\n\n# API pour les données en temps réel\n@app.route('/taches', methods=['GET'])\ndef get_taches():\n    return jsonify(taches)\n\n# Ajout et suppression de tâches\n@app.route('/taches', methods=['POST'])\ndef ajout_tache():\n    nom = request.json['nom']\n    description = request.json.get('description', '')\n    cree_le = datetime.now()\n    termine_le = None\n    if 'termine_le' in request.json:\n        termine_le = request.json['termine_le']\n    cursor.execute(\"INSERT INTO taches (nom, description, cree_le, termine_le) VALUES (?, ?, ?, ?)\",\n                   (nom, description, cree_le, termine_le))\n    conn.commit()\n    return jsonify({'success': True})\n\n@app.route('/taches/<int:id>', methods=['DELETE'])\ndef supprimer_tache(id):\n    cursor.execute(\"DELETE FROM taches WHERE id = ?\", (id,))\n    conn.commit()\n    return jsonify({'success': True})\n\n# Filtrage et tri des tâches\n@app.route('/taches', methods=['GET'])\ndef filtrer_taches():\n    filter_ = request.args.get('filter')\n    tri = request.args.get('tri')\n    if filter_:\n        taches_filtrees = [tache for tache in taches if filter_ in tache['nom'] or filter_ in tache['description']]\n    else:\n        taches_filtrees = taches\n    if tri:\n        taches_triees = sorted(taches_filtrees, key=lambda tache: tache[tri])\n    else:\n        taches_triees = taches_filtrees\n    return jsonify(taches_triees)\n\n# Vue de base pour le dashboard\n@app.route('/')\ndef index():\n    return render_template('index.html', taches=taches, statistiques=statistiques)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766330875.07969}