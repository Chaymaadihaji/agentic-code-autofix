{"nom_fichier": "main.py", "code": "# main.py\n\nfrom flask import Flask, render_template, request, jsonify\nfrom random import choice\nimport os\n\napp = Flask(__name__)\n\n# Dictionnaire de mots pour le jeu\nmots = {\n    \"facile\": [\"papillon\", \"fleur\", \"cercle\"],\n    \"moyen\": [\"ordinateur\", \"bibliothèque\", \"harmonie\"],\n    \"difficile\": [\"phénoménologie\", \"éphémère\", \"cathédrale\"]\n}\n\n# Chemin vers le fichier de scores\nchemin_scores = \"scores.json\"\n\n# Génération du mot au hasard\ndef generer_mot(niveau):\n    if niveau in mots:\n        return choice(mots[niveau])\n    else:\n        return choice(list(mots.values())[0])\n\n# Fonction pour afficher le pendu\ndef afficher_pendu(mot, lettres_guessées):\n    pendu = \"\"\n    for lettre in mot:\n        if lettre in lettres_guessées:\n            pendu += lettre + \" \"\n        else:\n            pendu += \"_ \"\n    return pendu\n\n# Fonction pour sauvegarder les scores\ndef sauvegarder_scores(nom, score):\n    if os.path.exists(chemin_scores):\n        with open(chemin_scores, \"r\") as f:\n            scores = json.load(f)\n    else:\n        scores = {}\n    scores[nom] = score\n    with open(chemin_scores, \"w\") as f:\n        json.dump(scores, f)\n\n# Fonction pour charger les scores\ndef charger_scores():\n    if os.path.exists(chemin_scores):\n        with open(chemin_scores, \"r\") as f:\n            return json.load(f)\n    else:\n        return {}\n\n# Route pour afficher le formulaire de jeu\n@app.route(\"/\", methods=[\"GET\"])\ndef formulaire_jeu():\n    return render_template(\"formulaire_jeu.html\")\n\n# Route pour traiter les lettres guessées\n@app.route(\"/guess\", methods=[\"POST\"])\ndef guess():\n    mot = generer_mot(request.form[\"niveau\"])\n    lettres_guessées = request.form[\"lettres_guessées\"].split()\n    pendu = afficher_pendu(mot, lettres_guessées)\n    score = len(mot) - len(pendu.replace(\"_\", \"\"))\n    return jsonify({\"mot\": mot, \"pendu\": pendu, \"score\": score})\n\n# Route pour sauvegarder les scores\n@app.route(\"/sauvegarder_scores\", methods=[\"POST\"])\ndef sauvegarder_scores_route():\n    nom = request.form[\"nom\"]\n    score = request.form[\"score\"]\n    sauvegarder_scores(nom, int(score))\n    return jsonify({\"message\": \"Scores sauvegardés avec succès\"})\n\n# Route pour charger les scores\n@app.route(\"/charger_scores\", methods=[\"GET\"])\ndef charger_scores_route():\n    scores = charger_scores()\n    return jsonify(scores)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830421.19452}