{"nom_fichier": "app.py", "code": "# app.py\n\nimport os\nfrom flask import Flask, render_template, request\nimport json\n\n# Configuration\napp = Flask(__name__)\ndata_file = 'citations.json'\n\n# Chargement des citations\nwith open(data_file, 'r') as f:\n    citations = json.load(f)\n\n# Route principale\n@app.route('/')\ndef index():\n    citation = random_citation(citations)\n    return render_template('index.html', citation=citation)\n\n# Route pour générer une nouvelle citation\n@app.route('/nouvelle_citation')\ndef nouvelle_citation():\n    citation = random_citation(citations)\n    return citation\n\n# Fonction pour générer une citation aléatoire\ndef random_citation(citations):\n    return random.choice(citations)\n\n# Route pour afficher une erreur\n@app.errorhandler(404)\ndef page_not_found(e):\n    return 'Erreur 404 : page non trouvée', 404\n\n# Lancement de l'application\nif __name__ == \"__main__\":\n    app.run(debug=True)\n\n# Template HTML\n@app.template_filter('strftime')\ndef _date_filter(date):\n    return date.strftime('%Y-%m-%d %H:%M:%S')\n\n# Fonction pour afficher les citations sous forme de tableau\n@app.template_filter('citations_table')\ndef _citations_table(citations):\n    return '<table><tr><th>Auteur</th><th>Citation</th></tr>' + ''.join(\n        '<tr><td>{}</td><td>{}</td></tr>'.format(c['auteur'], c['citation']) for c in citations\n    ) + '</table>'\n\n# Route pour afficher les citations sous forme de tableau\n@app.route('/citations')\ndef citations():\n    return render_template('citations.html', citations=citations)\n", "timestamp": 1766332541.5987036}