{"nom_fichier": "player.py", "code": "import random\nimport json\nfrom flask import Flask, render_template, request\n\napp = Flask(__name__)\n\n# Fichier de données contenant les mots\nwith open('mots.json', 'r') as f:\n    mots = json.load(f)\n\n# État du jeu\netat_jeu = {\n    'mot': '',\n    'lettres_proposees': [],\n    'lettres_justes': [],\n    'lettres_incorrectes': [],\n    'essais': 6\n}\n\n# Fonction pour générer un mot au hasard\ndef generer_mot():\n    return random.choice(list(mots.keys()))\n\n# Fonction pour afficher le pendu\ndef afficher_pendu(lettres_justes, lettres_incorrectes):\n    return f\"\"\"\n    <html>\n        <body>\n            <h1>Pendu</h1>\n            <h2>{etat_jeu['mot']}</h2>\n            <h2>Essais restants : {etat_jeu['essais']}</h2>\n            <h2>Lettres justes : {', '.join(lettres_justes)}</h2>\n            <h2>Lettres incorrectes : {', '.join(lettres_incorrectes)}</h2>\n            <form action=\"\" method=\"POST\">\n                <input type=\"text\" name=\"lettre\">\n                <input type=\"submit\" value=\"Proposer\">\n            </form>\n        </body>\n    </html>\n    \"\"\"\n\n# Fonction pour gérer la saisie de lettres par l'utilisateur\n@app.route('/', methods=['GET', 'POST'])\ndef saisie_litterre():\n    global etat_jeu\n    if request.method == 'POST':\n        lettre = request.form['lettre'].lower()\n        if len(lettre) != 1:\n            return 'Saisir une seule lettre'\n        if lettre in etat_jeu['lettres_proposees']:\n            return 'Lettre déjà proposée'\n        etat_jeu['lettres_proposees'].append(lettre)\n        if lettre in etat_jeu['mot']:\n            etat_jeu['lettres_justes'].append(lettre)\n        else:\n            etat_jeu['lettres_incorrectes'].append(lettre)\n            etat_jeu['essais'] -= 1\n        if len(etat_jeu['lettres_justes']) == len(etat_jeu['mot']):\n            return 'Vous avez gagné !'\n        if etat_jeu['essais'] == 0:\n            return 'Vous avez perdu !'\n    return afficher_pendu(etat_jeu['lettres_justes'], etat_jeu['lettres_incorrectes'])\n\n# Fonction pour générer un nouveau mot au hasard\n@app.route('/nouvellerMot', methods=['POST'])\ndef nouveau_mot():\n    global etat_jeu\n    etat_jeu['mot'] = generer_mot()\n    etat_jeu['lettres_proposees'] = []\n    etat_jeu['lettres_justes'] = []\n    etat_jeu['lettres_incorrectes'] = []\n    etat_jeu['essais'] = 6\n    return afficher_pendu(etat_jeu['lettres_justes'], etat_jeu['lettres_incorrectes'])\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n", "timestamp": 1766830327.5100675}