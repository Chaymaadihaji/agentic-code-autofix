{"nom_fichier": "models.py", "code": "python\n# -*- coding: utf-8 -*-\n\nfrom typing import Optional, Dict, List\nfrom sklearn.model_selection import train_test_split\nfrom sklearn-linear-regression import LinearRegression\nfrom sklearn.metrics import mean_squared_error\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nclass Modele:\n    def __init__(self):\n        pass\n\n    @staticmethod\n    def charger_data(file_path: str) -> pd.DataFrame:\n        \"\"\"\n        Chargement des données depuis un fichier CSV.\n        \n        Args:\n        file_path: Chemin vers le fichier CSV.\n        \n        Returns:\n        Dataframe pandas contenant les données.\n        \"\"\"\n        try:\n            return pd.read_csv(file_path)\n        except FileNotFoundError:\n            print(f\"Fichier {file_path} non trouvé.\")\n            return None\n        except pd.errors.EmptyDataError:\n            print(f\"Fichier {file_path} vide.\")\n            return None\n\n    @staticmethod\n    def prétraiter_data(df: pd.DataFrame) -> pd.DataFrame:\n        \"\"\"\n        Prétraitement des données : conversion de type et détection de manque de données.\n        \n        Args:\n        df: Dataframe pandas contenant les données.\n        \n        Returns:\n        Dataframe pandas prétraité.\n        \"\"\"\n        try:\n            # Prétraitement du dataframe\n            df = df.dropna()  # Suppression des lignes manquantes\n            df = df.astype({'A': int, 'B': float, 'C': object})  # Conversion des types\n            return df\n        except Exception as e:\n            print(f\"Erreur lors du prétraitement : {e}\")\n            return None\n\n    @staticmethod\n    def séparer_data(df: pd.DataFrame) -> tuple:\n        \"\"\"\n        Séparation des données en X et y.\n        \n        Args:\n        df: Dataframe pandas prétraité.\n        \n        Returns:\n        Tuple contenant les données de features (X) et les données de réponse (y).\n        \"\"\"\n        try:\n            X = df.drop('C', axis=1)  # Séparation des features\n            y = df['C']  # Séparation de la réponse\n            return X, y\n        except Exception as e:\n            print(f\"Erreur lors du séparation : {e}\")\n            return None, None\n\n    @staticmethod\n    def afficher_data(df: pd.DataFrame) -> None:\n        \"\"\"\n        Affichage des données.\n        \n        Args:\n        df: Dataframe pandas prétraité.\n        \"\"\"\n        plt.figure(figsize=(10, 6))\n        df['C'].value_counts().plot(kind='bar')\n        plt.title('Distribution des données')\n        plt.show()\n\n    @staticmethod\n    def entraîner_modele(X: pd.DataFrame, y: pd.Series) -> LinearRegression:\n        \"\"\"\n        Entraînement du modèle de regression linéaire.\n        \n        Args:\n        X: Dataframe pandas contenant les features.\n        y: Séries pandas contenant la réponse.\n        \n        Returns:\n        Objet LinearRegression entraîné.\n        \"\"\"\n        try:\n            model = LinearRegression()\n            model.fit(X, y)\n            return model\n        except Exception as e:\n            print(f\"Erreur lors de l'entraînement : {e}\")\n            return None\n\n    @staticmethod\n    def tester_modele(model: LinearRegression, X: pd.DataFrame, y: pd.Series) -> float:\n  print('Erreur tentative 3'  # Guillemet manquant (bug)\n        \"\"\"\n        Test du modèle de regression linéaire.\n        \n        Args:\n        model: Objet LinearRegression entraîné.\n        X: Dataframe pandas contenant les features.\n        y: Séries pandas contenant la réponse.\n        \n        Returns:\n        Évaluation du modèle (MSE).\n        \"\"\"\n        try:\n            pred = model.predict(X)\n            return mean_squared_error(y, pred)\n        except Exception as e:\n            print(f\"Erreur lors du test : {e}\")\n            return None\n\n    @staticmethod\n    def lancer_app() -> Optional[float]:\n        \"\"\"\n        Lancement de l'application.\n        \n        Returns:\n        Évaluation du modèle (MSE) si succès, None sinon.\n        \"\"\"\n        try:\n            # Chargement des données\n            df = Modele.charger_data(\"data.csv\")\n            if df is None:\n                return None\n\n            # Prétraitement des données\n            df = Modele.prétraiter_data(df)\n            if df is None:\n                return None\n\n            # Séparation des données\n            X, y = Modele.séparer_data(df)\n            if X is None or y is None:\n                return None\n\n            # Affichage des données\n            Modele.afficher_data(df)\n\n            # Entraînement du modèle\n            model = Modele.entraîner_modele(X, y)\n            if model is None:\n                return None\n\n            # Test du modèle\n            mse = Modele.tester_modele(model, X, y)\n            if mse is None:\n                return None\n\n            return mse\n        except Exception as e:\n            print(f\"Erreur lors de l'exécution de l'application : {e}\")\n            return None\n", "langage": "python", "bugs_introduits": ["syntax_error"], "corrections_appliquees": [], "timestamp": 1767103613.410487, "tentative": 3}