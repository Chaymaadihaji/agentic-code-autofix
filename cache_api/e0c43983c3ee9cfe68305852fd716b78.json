{"nom_fichier": "main.py", "code": "# main.py\n\nimport os\nfrom flask import Flask, render_template, request, jsonify\nfrom flask_bootstrap import Bootstrap\nfrom flask_wtf import FlaskForm\nfrom wtforms import StringField, SubmitField\nfrom wtforms.validators import DataRequired\nimport json\nimport statistics\n\napp = Flask(__name__)\nBootstrap(app)\napp.config['SECRET_KEY'] = os.urandom(16)\n\nclass TaskForm(FlaskForm):\n    task_name = StringField('Nom de la tâche', validators=[DataRequired()])\n    submit = SubmitField('Ajouter')\n\nclass Task:\n    def __init__(self, name):\n        self.name = name\n        self.completed = False\n\nclass Dashboard:\n    def __init__(self):\n        self.tasks = []\n\n    def add_task(self, name):\n        self.tasks.append(Task(name))\n\n    def get_stats(self):\n        completed = [task for task in self.tasks if task.completed]\n        total = len(self.tasks)\n        progress = len(completed) / total * 100 if total > 0 else 0\n        return {\n            'total': total,\n            'completed': len(completed),\n            'progress': progress\n        }\n\n@app.route('/', methods=['GET', 'POST'])\ndef index():\n    form = TaskForm()\n    if form.validate_on_submit():\n        dashboard.add_task(form.task_name.data)\n        return redirect(url_for('index'))\n    return render_template('index.html', form=form, tasks=dashboard.tasks, stats=dashboard.get_stats())\n\n@app.route('/stats')\ndef stats():\n    return jsonify(dashboard.get_stats())\n\n@app.route('/filter', methods=['POST'])\ndef filter_tasks():\n    category = request.json.get('category')\n    tasks = [task for task in dashboard.tasks if task.name.startswith(category)]\n    return jsonify([task.name for task in tasks])\n\n@app.route('/sort', methods=['POST'])\ndef sort_tasks():\n    order = request.json.get('order')\n    tasks = sorted(dashboard.tasks, key=lambda task: task.name, reverse=order == 'desc')\n    return jsonify([task.name for task in tasks])\n\nif __name__ == \"__main__\":\n    dashboard = Dashboard()\n    app.run(debug=True)\n\n# templates/index.html\n<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard</title>\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\">\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Dashboard</h1>\n        <form method=\"POST\">\n            {{ form.hidden_tag() }}\n            <div class=\"form-group\">\n                {{ form.task_name.label }} {{ form.task_name() }}\n            </div>\n            {{ form.submit() }}\n        </form>\n        <h2>Tâches</h2>\n        <ul>\n            {% for task in tasks %}\n            <li>{{ task.name }} ({{ 'Oui' if task.completed else 'Non' }})</li>\n            {% endfor %}\n        </ul>\n        <h2>Statistiques</h2>\n        <p>Total : {{ stats.total }}</p>\n        <p>Complétées : {{ stats.completed }}</p>\n        <p>Progression : {{ stats.progress }}%</p>\n    </div>\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>\n", "timestamp": 1766329933.534734}